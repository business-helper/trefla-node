const _0x1468=['z2vZ','Aw5KzxHpzG==','ugThAvC=','y2HHDa==','yxrjza==','C3vJy2vZCW==','yxPjuvC=','BM90igv4Axn0iq==','ANnVBG==','l2nVBw1VBI5Ozq==','C2f2zq==','z2v0qwXS','BxLdAgf0CM9VBq==','zMLSDgvY','BwvZC2fNzxm=','w3vPzf0=','B1vTqMK=','CMvJzwL2zxjFAq==','CgfNAw5HDgLVBG==','y3jLyxrLzce=','uunfA2i=','tKDmrq==','y3jLyxrLtM9YBq==','BxnN','ywnJzxb0x3n0yq==','ChrIDfm=','ywXS','BwLUswq=','ywrKtwvZC2fNzq==','zgf0yq==','C09MvxnLCG==','C2vUzgvYx2LK','s1HNr2S=','Bg9Hze1LC3nHzW==','DhvZ','C3rHDhvZ','CgfYyw1Z','zun4Ege=','Dg54Dhy=','EfboCK4=','q29UBMvJDgLVBG==','y2HHDc5TB2rLBa==','lI4VAgvSCgvYCW==','yw9js0u=','y29UC3rHBNq=','CgDqq0G=','y2HHDhm=','DgLTzq==','z2v0qNLjza==','l2f1DgGUAgvSCa==','C3rYAw5NAwz5','CgfYC2u=','ALbJqwe=','u0Tux0niqvrFra==','zKz4sw0=','y2fYzf9UDw1Izq==','Dw5YzwfKx251Bq==','BgvUz3rO','BwfW','AxngB3jdyxjK','lI4VBw9KzwXZlW==','DgHLBG==','tMzIBfy=','ywXSq2HHDhnpzG==','l21VzgvSlMHLBa==','Dw5YzwfKx3vWza==','ywnJzxb0q2HHDa==','z2v0twLUswq=','B3v0Chv0','CgvUzgLUz0nOyq==','y3jLyxrLq2fYza==','q0LUCMy=','zMLyDM4=','lI4Vy29UC3rHBG==','lxzHBgLKyxrVCG==','q2HHDfjLCq==','BgLTAxq=','BufdBuy=','y2fYzf92zxjPzG==','u0HOse4=','ChvZAa==','Bg9N','BwvZC2fNzs5TBW==','zgvSzxrLqNLjza==','q2HHDcbYB29Tia==','BgfZDf9TzxnZyq==','vNzbAxq=','uMvX','A2HvC04=','zM9YrwfJAa==','z2v0q2HHDfrVqW==','BwvZC2fNzq==','rKzKqvO=','t3nrqMu=','yM9KEq==','AvH2rMC=','DxnLCI5TB2rLBa==','CeXfqxK=','Dg90ywW=','BgfZDf9Pza==','uujWsfO=','y2HHDf9Pza==','DxnLCL9Pza==','y2f0y2G=','vM14u1y=','z2v0qNLjzhm=','Ew1LDgG=','DxnLCL9Pzhm=','y3jLyxrL','q2HHDcbKB2vZia==','wgrnENy=','ruXfveve','ExjrzLO=','Bwf4swq=','z2v0vw5YzwfKtq==','EhjVD2i=','Dg9tDhjPBMC=','rMXtzM0=','C29JA2v0x2LK','DhmVC29JA2v0lG==','DxnLCG==','zxjZ','DhjVB21Z','r0fdswS=','z2v0qwXSq2HHDa=='];(function(_0x4a100c,_0x157628){const _0x36f84d=function(_0x2fc5d9){while(--_0x2fc5d9){_0x4a100c['push'](_0x4a100c['shift']());}};_0x36f84d(++_0x157628);}(_0x1468,0x1416+-0xc*-0x112+0x1f05*-0x1));const _0x4c6e=function(_0x33ac1c,_0x531277){_0x33ac1c=_0x33ac1c-(0x1416+-0xc*-0x112+0x201e*-0x1);let _0x77f24f=_0x1468[_0x33ac1c];if(_0x4c6e['jHbfPS']===undefined){var _0x3471f0=function(_0x2bffc2){const _0x9e0d5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x334592=String(_0x2bffc2)['replace'](/=+$/,'');let _0x3ffd31='';for(let _0x5d1441=0x1*0x159c+0x157d*-0x1+-0x1*0x1f,_0x95a05e,_0x16df17,_0x4e2eb9=-0x76e+-0x2525+0x1*0x2c93;_0x16df17=_0x334592['charAt'](_0x4e2eb9++);~_0x16df17&&(_0x95a05e=_0x5d1441%(0x14a+-0x1da+-0x25*-0x4)?_0x95a05e*(0x2544+0x1418+-0x44*0xd7)+_0x16df17:_0x16df17,_0x5d1441++%(-0x9c5+0x1233*-0x2+0x2e2f))?_0x3ffd31+=String['fromCharCode'](-0x22b9+-0x194e*-0x1+-0xa6a*-0x1&_0x95a05e>>(-(0x1201*-0x1+-0x1*0x170f+0x2912)*_0x5d1441&-0x2*-0xb6b+-0xe44*-0x1+-0x54*0x71)):-0x5cc+-0x7d5+0x48b*0x3){_0x16df17=_0x9e0d5['indexOf'](_0x16df17);}return _0x3ffd31;};_0x4c6e['IFeweJ']=function(_0x14bff2){const _0x472fd3=_0x3471f0(_0x14bff2);let _0x58bf8a=[];for(let _0x3c5a20=0x1499+-0x2456+0xfbd,_0x332830=_0x472fd3['length'];_0x3c5a20<_0x332830;_0x3c5a20++){_0x58bf8a+='%'+('00'+_0x472fd3['charCodeAt'](_0x3c5a20)['toString'](0x40d*0x2+0x154c+0x2ef*-0xa))['slice'](-(-0x16e5+0x1*0x9c7+0xd20));}return decodeURIComponent(_0x58bf8a);},_0x4c6e['uARwSx']={},_0x4c6e['jHbfPS']=!![];}const _0x2a4b8e=_0x4c6e['uARwSx'][_0x33ac1c];return _0x2a4b8e===undefined?(_0x77f24f=_0x4c6e['IFeweJ'](_0x77f24f),_0x4c6e['uARwSx'][_0x33ac1c]=_0x77f24f):_0x77f24f=_0x2a4b8e,_0x77f24f;};const _0x3ab177=_0x4c6e,_0x3fd959=_0x4c6e,{Validator}=require('node-input'+_0x3ab177('0x125')),CONSTS=require(_0x3ab177('0x124')+_0x3ab177('0xd5')+_0x3fd959('0x107')),Chat=require(_0x3fd959('0x117')+_0x3ab177('0x104')),User=require('../models/'+_0x3ab177('0x13b')),Message=require('../models/'+_0x3fd959('0x12d')+'del'),{getTokenInfo}=require(_0x3fd959('0x105')+_0x3fd959('0x10c')+_0x3ab177('0xd7')),{bool2Int,chatPartnerId,getTotalLikes,generateTZTimeString,respondError}=require('../helpers'+_0x3fd959('0xe4')+'lpers'),{generateChatData,generateMessageData,getLastMsgIndexOfChat}=require(_0x3ab177('0x105')+_0x3fd959('0x11b')+'pers');exports['create']=async(_0x442290,_0x8d7d9b)=>{const _0x3c0d78=_0x3fd959,_0x12004f=_0x3ab177,_0x4f5c9c={};_0x4f5c9c[_0x3c0d78('0x13c')]=_0x3c0d78('0x12f')+'created!',_0x4f5c9c[_0x3c0d78('0xf4')]=function(_0x2f063f,_0x3aa332){return _0x2f063f(_0x3aa332);},_0x4f5c9c[_0x3c0d78('0x10f')]=function(_0xc87acd,_0x5f417d,_0x1372ab,_0x3970ea){return _0xc87acd(_0x5f417d,_0x1372ab,_0x3970ea);};const _0x2603a6=_0x4f5c9c,{uid:_0x57da3a}=_0x2603a6[_0x12004f('0xf4')](getTokenInfo,_0x442290),_0x43e8bd=_0x442290[_0x3c0d78('0x139')][_0x3c0d78('0xec')+'d']?await User[_0x3c0d78('0x10b')](_0x442290[_0x3c0d78('0x139')]['receiver_i'+'d']):null;let _0x458735=_0x2603a6[_0x12004f('0x10f')](generateChatData,_0x442290[_0x3c0d78('0x139')],_0x57da3a,_0x43e8bd);const _0x27b651=_0x442290[_0x12004f('0x139')][_0x3c0d78('0x136')]?_0x2603a6[_0x12004f('0xf4')](generateMessageData,{..._0x442290[_0x12004f('0x139')],'sender_id':_0x57da3a,'receiver_id':_0x43e8bd?_0x43e8bd['id']:0x1*-0x24cd+-0x5d*0x2+-0x1*-0x2587,'message':_0x442290[_0x3c0d78('0x139')][_0x12004f('0x136')]}):null;return Chat[_0x12004f('0x147')](_0x458735)[_0x3c0d78('0x118')](_0x2c7ad1=>Promise[_0x12004f('0xf5')]([_0x2c7ad1,User[_0x12004f('0x10b')](_0x57da3a),_0x27b651?Message[_0x12004f('0x147')]({..._0x27b651,'chat_id':_0x2c7ad1['id']}):null]))[_0x12004f('0x118')](([_0x5764d2,_0x575e79,_0x3f4840])=>{const _0x30de56=_0x3c0d78,_0xfc3881=_0x12004f;_0x5764d2=Chat[_0x30de56('0x11f')](_0x5764d2),_0x5764d2['receiver']=User[_0xfc3881('0x11f')](_0x43e8bd);const _0x1267e3={};return _0x1267e3[_0x30de56('0xfe')]=!![],_0x1267e3[_0x30de56('0x136')]=_0x2603a6[_0x30de56('0x13c')],_0x1267e3[_0x30de56('0xf8')]=_0x5764d2,_0x8d7d9b['json'](_0x1267e3);})[_0x12004f('0x142')](_0x49d625=>respondError(_0x8d7d9b,_0x49d625));},exports[_0x3ab177('0x10b')]=async(_0x5b2e5e,_0x1cb37a)=>{const _0x3d8a73=_0x3ab177,_0x208ff4=_0x3fd959,_0x48e48b={};_0x48e48b['eFOAW']=function(_0x54a38f,_0xbf1311){return _0x54a38f-_0xbf1311;},_0x48e48b[_0x3d8a73('0xdd')]=function(_0x18282d,_0xe3fc98){return _0x18282d-_0xe3fc98;},_0x48e48b[_0x208ff4('0x100')]=function(_0x44ac47,_0x185498){return _0x44ac47>_0x185498;},_0x48e48b['pgPCH']=_0x3d8a73('0xe0');const _0x1afa3c=_0x48e48b,{uid:_0x54af90}=getTokenInfo(_0x5b2e5e),{id:_0x4f3140}=_0x5b2e5e[_0x208ff4('0xff')],_0x1f44c1=0x1*0x16d9+-0x27*0x93+0x2b*-0x2,_0x56ef64=null;return Chat[_0x3d8a73('0x10b')](_0x4f3140)[_0x208ff4('0x118')](_0x2b9b7f=>{const _0xd01f30=_0x3d8a73,_0x1cbb91=_0x3d8a73,_0x479999=JSON['parse'](_0x2b9b7f[_0xd01f30('0x146')]);let _0x4f1f83=_0x479999[_0x1cbb91('0xdc')](_0x54af90);_0x4f1f83===-(0x133c+0x15*-0x8d+0x2*-0x3d5)&&(_0x4f1f83=0x5*-0x54a+-0x17f*-0x1+0x18f3);const _0x3255f5=_0x1afa3c['eFOAW'](_0x1afa3c[_0x1cbb91('0xdd')](_0x479999[_0x1cbb91('0x114')],_0x4f1f83),-0x9d9+-0xb*0x295+0x2641);return Promise['all']([_0x2b9b7f,_0x1afa3c[_0xd01f30('0x100')](_0x479999[_0x1cbb91('0x114')],0x1*0x15b0+0x1*-0xeb4+-0x6fc)?User[_0x1cbb91('0x10b')](_0x479999[_0x3255f5]):null,Message[_0x1cbb91('0xed')]({'limit':_0x1f44c1,'last_id':_0x56ef64,'chat_id':_0x2b9b7f['id']})]);})[_0x3d8a73('0x118')](([_0x14c717,_0xfaae8f,_0x47e446])=>{const _0x58af89=_0x3d8a73,_0x18782b=_0x3d8a73;_0x14c717=Chat['output'](_0x14c717);const _0x5500fb={..._0x14c717};_0x5500fb[_0x58af89('0xd6')]=User[_0x18782b('0x11f')](_0xfaae8f);const _0x495bad={};return _0x495bad['status']=!![],_0x495bad[_0x58af89('0x136')]=_0x1afa3c[_0x18782b('0x108')],_0x495bad[_0x18782b('0xf8')]=_0x5500fb,_0x1cb37a[_0x58af89('0xe3')](_0x495bad);})[_0x3d8a73('0x142')](_0x1d8c57=>respondError(_0x1cb37a,_0x1d8c57));},exports[_0x3ab177('0x120')+'trooms']=async(_0x139cc7,_0x2a05f4)=>{const _0x33ba17=_0x3ab177,_0x10465b=_0x3fd959,_0x3c494a={};_0x3c494a['khUsN']=function(_0x112140,_0x39c90f){return _0x112140>_0x39c90f;},_0x3c494a[_0x33ba17('0x143')]=function(_0x3b8e94,_0x5500a8){return _0x3b8e94-_0x5500a8;},_0x3c494a[_0x10465b('0x13a')]=function(_0x3de71d,_0x450ac9){return _0x3de71d===_0x450ac9;};const _0xf8c0be=_0x3c494a,{uid:_0x3ba6b0}=getTokenInfo(_0x139cc7);return console[_0x10465b('0x12c')](_0x33ba17('0xea'),_0x3ba6b0),Chat['pendingCha'+_0x10465b('0xd8')](_0x3ba6b0)[_0x33ba17('0x118')](_0x3c15c1=>{const _0x21988f=_0x10465b,_0xf40d0b=_0x33ba17;let _0x4ac114=[-0x923+0x905+0x1e];for(let _0x4b43a6 of _0x3c15c1){let _0x20e3e2=JSON[_0x21988f('0x10e')](_0x4b43a6[_0xf40d0b('0x146')]);_0xf8c0be[_0x21988f('0x133')](_0x20e3e2[_0xf40d0b('0x114')],0x31*-0x17+-0xb*-0xfd+-0x677)&&(_0x4ac114[_0xf40d0b('0x12b')](_0x20e3e2[0xa18+-0x1017+0x5ff]),_0x4ac114[_0xf40d0b('0x12b')](_0x20e3e2[_0xf8c0be['VmxSV'](_0x20e3e2['length'],0x5e*0x29+0x5d*-0x2c+0xef)]));}const _0x199efd=User[_0xf40d0b('0x144')](_0x4ac114);return Promise[_0xf40d0b('0xf5')]([_0x3c15c1,_0x199efd]);})['then'](([_0x4e4fa8,_0x171860])=>{const _0x5e796a=_0x10465b,_0x4feadc=_0x10465b,_0x18d19b={};_0x18d19b['qXYaq']=function(_0x4d83e1,_0x5d98e8,_0x439d5c){return _0x4d83e1(_0x5d98e8,_0x439d5c);},_0x18d19b['NfblV']=function(_0x32e0da,_0x339572){const _0x170bd6=_0x4c6e;return _0xf8c0be[_0x170bd6('0x13a')](_0x32e0da,_0x339572);};const _0x1603c9=_0x18d19b;let _0x400ff3={};_0x171860[_0x5e796a('0x134')](_0x3b1afb=>{const _0x50f12a=_0x5e796a;_0x400ff3[_0x3b1afb['id']]=User[_0x50f12a('0x11f')](_0x3b1afb);}),_0x4e4fa8=_0x4e4fa8[_0x4feadc('0x115')](_0x594823=>Chat[_0x5e796a('0x11f')](_0x594823))[_0x4feadc('0x115')](_0x50d1e4=>{const _0x109251=_0x4feadc,_0x1cb608=_0x5e796a,_0x3b0880=_0x50d1e4[_0x109251('0x146')],_0x1d8fdc=_0x1603c9['qXYaq'](chatPartnerId,_0x50d1e4[_0x1cb608('0x146')],_0x3ba6b0),_0x30df57={..._0x50d1e4};return _0x30df57['isSent']=_0x1603c9[_0x109251('0x119')](_0x3b0880[0x12ff*-0x2+-0xe17+0x3415],_0x3ba6b0),_0x30df57['user']=_0x400ff3[_0x1d8fdc[_0x109251('0xd2')]()],_0x30df57;});const _0x53cba6={};return _0x53cba6[_0x4feadc('0xfe')]=!![],_0x53cba6[_0x5e796a('0x136')]='success',_0x53cba6[_0x4feadc('0xf8')]=_0x4e4fa8,_0x2a05f4[_0x5e796a('0xe3')](_0x53cba6);})[_0x10465b('0x142')](_0x32591b=>respondError(_0x2a05f4,_0x32591b));},exports['availableC'+'hatrooms']=async(_0x347048,_0x209ee7)=>{const _0x29ebfb=_0x3fd959,_0x5a78dc=_0x3fd959,_0x4d9db9={};_0x4d9db9[_0x29ebfb('0x102')]=function(_0x30f376,_0x26b093){return _0x30f376>_0x26b093;},_0x4d9db9[_0x29ebfb('0x145')]=function(_0x9ced6f,_0x26e003){return _0x9ced6f-_0x26e003;},_0x4d9db9[_0x29ebfb('0x13f')]=function(_0x129a5e,_0x18df97){return _0x129a5e-_0x18df97;},_0x4d9db9[_0x5a78dc('0xeb')]=function(_0x489ffb,_0x328a19){return _0x489ffb===_0x328a19;},_0x4d9db9[_0x29ebfb('0x12a')]=function(_0x258a17,_0x5554ca){return _0x258a17(_0x5554ca);};const _0x6be243=_0x4d9db9,{uid:_0xc233ae}=_0x6be243[_0x5a78dc('0x12a')](getTokenInfo,_0x347048);return Chat[_0x29ebfb('0xe7')+'s'](_0xc233ae,-0x1d57+-0x11cf+-0x2f27*-0x1)[_0x29ebfb('0x118')](_0x3d0281=>{const _0x5414e5=_0x5a78dc,_0x572464=_0x29ebfb;let _0x11b42b=[0x6*-0x3ef+-0x1*-0x19be+0x2*-0x112];for(let _0x5c0856 of _0x3d0281){let _0x162e9f=JSON[_0x5414e5('0x10e')](_0x5c0856['user_ids']);_0x6be243['xPNrN'](_0x162e9f[_0x5414e5('0x114')],0xf2+0x1*0xda3+-0x4dc*0x3)&&(_0x11b42b[_0x572464('0x12b')](_0x162e9f[0xc98*0x2+-0x919+-0x1017*0x1]),_0x11b42b[_0x572464('0x12b')](_0x162e9f[_0x6be243[_0x5414e5('0x145')](_0x162e9f[_0x572464('0x114')],0x1085*0x1+-0x5c0+-0x4*0x2b1)]));}const _0x275791=User[_0x5414e5('0x144')](_0x11b42b);return Promise[_0x5414e5('0xf5')]([_0x3d0281,_0x275791]);})[_0x5a78dc('0x118')](([_0x1f0144,_0x4151e7])=>{const _0x56ebf7=_0x29ebfb,_0x33139d=_0x29ebfb;let _0x17c35a={};_0x4151e7[_0x56ebf7('0x134')](_0x63ea9a=>{const _0x3c61fe=_0x56ebf7;_0x17c35a[_0x63ea9a['id']]=User[_0x3c61fe('0x11f')](_0x63ea9a);}),_0x1f0144=_0x1f0144['map'](_0x28a4c6=>Chat[_0x56ebf7('0x11f')](_0x28a4c6))['map'](_0x5c3d42=>{const _0x5c7183=_0x33139d,_0xb86355=_0x56ebf7;let _0x2f2f00=[_0x5c3d42['user_ids'][0x4fa+0x1ad4+0x3*-0xa9a]];_0x6be243['xPNrN'](_0x5c3d42[_0x5c7183('0x146')][_0x5c7183('0x114')],-0x1a0c+0x14ad+0x560)&&_0x2f2f00[_0x5c7183('0x12b')](_0x5c3d42[_0x5c7183('0x146')][_0x6be243['QBpHZ'](_0x5c3d42[_0xb86355('0x146')]['length'],0x16e8*-0x1+-0x24ae+0x3b97)]);const _0xeca2c6=_0x6be243[_0xb86355('0xeb')](_0x2f2f00[0x254a+-0x1bf1+-0x959],_0xc233ae)?_0x2f2f00[0x1*-0x1d1e+-0x14b*0x3+-0x40*-0x84]:_0x2f2f00[0x2dd*-0x3+-0x131d+0x1bb4],_0x449332={..._0x5c3d42};return _0x449332[_0xb86355('0xd6')]=_0x17c35a[_0xeca2c6[_0x5c7183('0xd2')]()],_0x449332;});const _0x1a869d={};return _0x1a869d['status']=!![],_0x1a869d['message']=_0x56ebf7('0xe0'),_0x1a869d[_0x33139d('0xf8')]=_0x1f0144,_0x209ee7['json'](_0x1a869d);})[_0x29ebfb('0x142')](_0x54f1ae=>respondError(_0x209ee7,_0x54f1ae));},exports[_0x3fd959('0xf1')+'alChatReq']=async(_0x1152b7,_0x4843c9,_0x252f8b=!![])=>{const _0x2a2565=_0x3fd959,_0xd811e3=_0x3fd959,_0x268628={};_0x268628['VvAit']=function(_0x5ea49e,_0x588341){return _0x5ea49e===_0x588341;},_0x268628['xrowb']=_0x2a2565('0x12f')+'created!',_0x268628[_0x2a2565('0x138')]=function(_0x1f7e0a,_0x4f31be,_0x21296d,_0x3a91cf){return _0x1f7e0a(_0x4f31be,_0x21296d,_0x3a91cf);},_0x268628[_0x2a2565('0x106')]=function(_0x56440e,_0x228e28){return _0x56440e(_0x228e28);};const _0x50b1b8=_0x268628,_0x22e925=_0x4843c9['receiver_i'+'d']?await User[_0xd811e3('0x10b')](_0x4843c9[_0x2a2565('0xec')+'d']):null;let _0xf2a09f=_0x50b1b8[_0xd811e3('0x138')](generateChatData,_0x4843c9,_0x1152b7,_0x22e925);_0xf2a09f[_0x2a2565('0xf3')+_0x2a2565('0xfd')]=!_0x252f8b?-0x2494+0x1da*0x7+0x179f:0x1*-0x6e7+-0x727+0xe0e;const _0x3a5254=_0x4843c9[_0x2a2565('0x136')]?_0x50b1b8[_0x2a2565('0x106')](generateMessageData,{..._0x4843c9,'sender_id':_0x1152b7,'receiver_id':_0x22e925?_0x22e925['id']:-0xd65+-0x2d4+-0x1*-0x1039,'message':_0x4843c9[_0x2a2565('0x136')]}):null;let _0x3a8751;if(_0x22e925){const _0xbfbab6={};_0xbfbab6[_0x2a2565('0xfa')]=_0x1152b7,_0xbfbab6[_0x2a2565('0xec')+'d']=_0x22e925['id'],_0xbfbab6[_0x2a2565('0x116')]=0x0;let _0x4c2c2e=await Chat['getByUserI'+'ds'](_0xbfbab6);_0x4c2c2e[_0x2a2565('0xe8')](_0x145e48=>{const _0x315417=_0xd811e3,_0x443bb1=_0xd811e3,_0x401065=JSON[_0x315417('0x10e')](_0x145e48[_0x443bb1('0x146')]);return _0x50b1b8[_0x315417('0x131')](_0x401065[_0x443bb1('0x114')],0x701+0x119*0x19+0x13*-0x1d0);}),_0x4c2c2e[_0x2a2565('0x114')]>0xc04+0xfee+-0x62*0x49&&(_0x3a8751=_0x4c2c2e[-0x1d4+0x1*0x1303+0x35*-0x53]);}return Promise[_0x2a2565('0xf5')]([_0x3a8751?_0x3a8751:Chat[_0xd811e3('0x147')](_0xf2a09f),User['getById'](_0x1152b7),_0x3a5254?Message[_0xd811e3('0x147')]({..._0x3a5254,'chat_id':chat['id']}):null])[_0xd811e3('0x118')](([_0x45352e,_0x5cf4c5,_0x487127])=>{const _0x33c465=_0xd811e3,_0x3b60e4=_0xd811e3;_0x45352e=Chat[_0x33c465('0x11f')](_0x45352e),_0x45352e[_0x3b60e4('0xd6')]=User[_0x33c465('0x11f')](_0x22e925);const _0x210bf3={};return _0x210bf3[_0x33c465('0xfe')]=!![],_0x210bf3[_0x33c465('0x136')]=_0x50b1b8[_0x3b60e4('0xd1')],_0x210bf3[_0x33c465('0xf8')]=_0x45352e,_0x210bf3;});},exports[_0x3fd959('0x121')+_0x3fd959('0x126')]=async(_0x19d616,_0x40a061,_0x361f11)=>{const _0x1e7bb8=_0x3ab177,_0x161568=_0x3ab177,_0x1ca6b0={};_0x1ca6b0['QCEkb']=_0x1e7bb8('0x12f')+_0x161568('0xee'),_0x1ca6b0['GACIk']=function(_0x13fafb,_0x5ea1ab){return _0x13fafb(_0x5ea1ab);},_0x1ca6b0[_0x161568('0x111')]=function(_0x5b971a,_0x1a644b){return _0x5b971a>_0x1a644b;};const _0x3d88fc=_0x1ca6b0,_0x5df7a1=_0x40a061[_0x161568('0xec')+'d']?await User['getById'](_0x40a061[_0x161568('0xec')+'d']):null;let _0x5e358d=generateChatData(_0x40a061,_0x19d616,_0x5df7a1);_0x5e358d[_0x161568('0xf3')+_0x1e7bb8('0xfd')]=!_0x361f11?-0x1d47*0x1+0x7*0x431+-0x1*0xf:-0xc83*0x1+-0x214*-0x4+0x433;const _0x181f8b=_0x40a061[_0x1e7bb8('0x136')]?_0x3d88fc[_0x1e7bb8('0xd9')](generateMessageData,{..._0x40a061,'sender_id':_0x19d616,'receiver_id':_0x5df7a1?_0x5df7a1['id']:-0xb*0x167+0x149f+0x46*-0x13,'message':_0x40a061[_0x1e7bb8('0x136')]}):null;let _0x5c787a;const _0x5a4f18={};_0x5a4f18[_0x1e7bb8('0x112')+'r']=_0x40a061[_0x161568('0x112')+'r'],_0x5a4f18[_0x161568('0x141')]=_0x19d616;let _0x3213d1=await Chat[_0x1e7bb8('0x135')+'ard'](_0x5a4f18);const _0x3511fe=_0x3213d1[_0x1e7bb8('0xe8')](_0x5e4c6=>{const _0x5ee969=_0x1e7bb8,_0x22277b=_0x161568,_0xc00d4c=JSON[_0x5ee969('0x10e')](_0x5e4c6[_0x22277b('0x146')]);return _0xc00d4c[0x5*-0x1b4+0x7*-0x52+0xac2]===_0x19d616;});return _0x3d88fc[_0x1e7bb8('0x111')](_0x3511fe['length'],0x15a9+0x1e*-0x1a+-0x129d)&&(_0x5c787a=_0x3511fe[-0x142f*0x1+0x15e1+-0x1*0x1b2]),Promise[_0x1e7bb8('0xf5')]([_0x5c787a?_0x5c787a:Chat[_0x161568('0x147')](_0x5e358d),User['getById'](_0x19d616)])[_0x161568('0x118')](([_0x57d3fe,_0x550407])=>Promise[_0x1e7bb8('0xf5')]([_0x57d3fe,_0x550407,_0x181f8b?Message[_0x161568('0x147')]({..._0x181f8b,'chat_id':_0x57d3fe['id']}):null]))[_0x161568('0x118')](([_0x434227,_0x593ef7,_0x105654])=>{const _0x374b33=_0x1e7bb8,_0x38e679=_0x1e7bb8;_0x434227=Chat[_0x374b33('0x11f')](_0x434227),_0x434227[_0x38e679('0xd6')]=User['output'](_0x5df7a1);const _0x3cc73c={};return _0x3cc73c[_0x38e679('0xfe')]=!![],_0x3cc73c[_0x38e679('0x136')]=_0x3d88fc[_0x374b33('0xef')],_0x3cc73c[_0x38e679('0xf8')]=_0x434227,_0x3cc73c[_0x38e679('0xf2')]=_0x105654,_0x3cc73c;});},exports[_0x3fd959('0x11d')+_0x3fd959('0x103')+_0x3ab177('0x132')]=async _0xc48547=>{const _0x46bcd9=_0x3ab177;return Chat['getById'](_0xc48547)['then'](_0x4af9f5=>{const _0x29ad4c=_0x4c6e;return _0x4af9f5[_0x29ad4c('0xf3')+'tus']=0x1*-0x445+0x3bf*-0x6+0xd6*0x20,Chat['save'](_0x4af9f5);})[_0x46bcd9('0x118')](_0x40157b=>{const _0x11abc4=_0x46bcd9;return Chat[_0x11abc4('0x11f')](_0x40157b);});},exports[_0x3ab177('0xf7')+_0x3fd959('0x132')]=async({sender_id:_0x5d2d42,receiver_id:_0x319522,chat_id:_0x3ccb00,payload:_0x3ea273})=>{const _0x2fec3c=_0x3ab177,_0x4851f3=_0x3fd959,_0x37bb68={};_0x37bb68[_0x2fec3c('0x122')]=function(_0x3ba8e6){return _0x3ba8e6();},_0x37bb68[_0x2fec3c('0x123')]=function(_0x21f783,_0x2e594a){return _0x21f783!==_0x2e594a;};const _0x463ae8=_0x37bb68;let _0x512773,_0x18ad4b,_0x3f43fd;return Promise[_0x4851f3('0xf5')]([Chat[_0x2fec3c('0x10b')](_0x3ccb00),User['getById'](_0x5d2d42),User['getById'](_0x319522)])['then'](async([_0xfb48ab,_0x11ee74,_0x172234])=>{const _0x5a4cba=_0x4851f3,_0x2f2a87=_0x4851f3;_0x18ad4b=_0x11ee74,_0x3f43fd=_0x172234;let _0x5eb439=JSON[_0x5a4cba('0x10e')](_0xfb48ab[_0x2f2a87('0x130')+_0x2f2a87('0xdb')]);const _0x5d6701=JSON[_0x5a4cba('0x10e')](_0xfb48ab[_0x5a4cba('0x146')]),_0x41f0da=0x1*-0x973+-0x2*-0x86f+-0x76b*0x1,_0x20b12a={};_0x20b12a['msg']=_0x3ea273['message'],_0x20b12a[_0x2f2a87('0x10a')]=_0x463ae8[_0x2f2a87('0x122')](generateTZTimeString),_0x5eb439[_0x41f0da]=_0x20b12a,_0xfb48ab[_0x2f2a87('0x130')+_0x2f2a87('0xdb')]=JSON[_0x2f2a87('0x10d')](_0x5eb439);let _0x18cac2=![],_0x805a98=JSON['parse'](_0xfb48ab[_0x2f2a87('0x113')+'s']);if(_0x172234&&_0x463ae8['fiXvn'](_0x172234['current_ch'+'at'],_0xfb48ab['id'])){_0x18cac2=!![];const _0x136dcf=_0x5d6701[_0x5a4cba('0xdc')](_0x319522);_0x805a98[_0x136dcf]++,_0xfb48ab['unread_num'+'s']=JSON[_0x2f2a87('0x10d')](_0x805a98);}else{if(_0xfb48ab[_0x5a4cba('0x116')]&&!_0xfb48ab[_0x2f2a87('0x129')+'ied']){_0x18cac2=!![];const _0x2707f3=_0x5d6701[_0x2f2a87('0x114')];unread_num=_0x805a98[_0x2707f3]||-0x45b+-0x987+0xde2,_0x805a98[_0x2707f3]=unread_num+(-0x2e3*0xa+0x1172+0xb6d),_0xfb48ab[_0x5a4cba('0x113')+'s']=JSON['stringify'](_0x805a98);}}const _0x2334a5={..._0x3ea273};_0x2334a5[_0x2f2a87('0xfa')]=_0x5d2d42,_0x2334a5[_0x2f2a87('0xec')+'d']=_0x319522,_0x2334a5[_0x2f2a87('0x140')]=_0x3ccb00;const _0xe42c6c=generateMessageData(_0x2334a5);return Promise[_0x5a4cba('0xf5')]([Message['create'](_0xe42c6c),Chat[_0x5a4cba('0xe5')](_0xfb48ab),_0x18cac2]);})[_0x4851f3('0x118')](([_0x58f5f5,_0x5ef7cd,_0x12ff56])=>{const _0x141be3=_0x2fec3c,_0x5dec69=_0x4851f3;_0x58f5f5=Message['output'](_0x58f5f5);const _0x1deffe={};return _0x1deffe[_0x141be3('0x136')]=_0x58f5f5,_0x1deffe[_0x141be3('0xde')]=Chat['output'](_0x5ef7cd),_0x1deffe[_0x141be3('0x11c')+'ated']=_0x12ff56,_0x1deffe;});},exports[_0x3ab177('0xfc')+'eReq']=async({myId:myId=null,chat_id:_0x14284e,last_id:_0x28db63,limit:_0x5ba652})=>{const _0xe6426d=_0x3ab177,_0x2b6382=_0x3ab177,_0x43777f={};_0x43777f['zzlmU']=function(_0x3d7f2c,_0x436a11){return _0x3d7f2c===_0x436a11;};const _0x47c3bb=_0x43777f,_0x4eb36c=await Chat[_0xe6426d('0x10b')](_0x14284e),_0x4ff00b=JSON[_0x2b6382('0x10e')](_0x4eb36c['user_ids']),_0x3f04ab=_0x47c3bb['zzlmU'](_0x4ff00b[0x1*-0x723+0x227f*0x1+-0x1b5c],myId);let _0x5af312=-0x160*-0x16+0x20e2+-0x3f22,_0x3824b4=-0x54b*-0x5+0x16b4*0x1+-0x133*0x29;const _0x3cc847={};_0x3cc847[_0xe6426d('0x127')]=_0x5ba652,_0x3cc847[_0xe6426d('0x13e')]=_0x28db63,_0x3cc847[_0xe6426d('0x140')]=_0x14284e,_0x3cc847['minId']=_0x3824b4,_0x3cc847[_0xe6426d('0x14c')]=_0x5af312;const _0x4d0aa6={};_0x4d0aa6[_0xe6426d('0x140')]=_0x14284e,_0x4d0aa6[_0xe6426d('0xf6')]=_0x3824b4,_0x4d0aa6[_0xe6426d('0x14c')]=_0x5af312;const _0x5dd94f={};return _0x5dd94f[_0xe6426d('0x140')]=_0x14284e,Promise[_0xe6426d('0xf5')]([Message[_0x2b6382('0xed')](_0x3cc847),Message[_0xe6426d('0xe6')](_0x4d0aa6),Message[_0xe6426d('0x11e')](_0x5dd94f),User[_0x2b6382('0x144')](_0x4ff00b)])['then'](([_0x5d39a8,_0x11eed7,_0x41ba8b,_0x3b4673])=>{const _0x13dd89=_0x2b6382,_0x47d7f5=_0xe6426d;let _0x51d43b={};_0x3b4673[_0x13dd89('0x134')](_0x3ea202=>{const _0x4263f8=_0x13dd89;_0x51d43b[_0x3ea202['id']['toString']()]=User[_0x4263f8('0x11f')](_0x3ea202);}),_0x5d39a8=_0x5d39a8[_0x13dd89('0x115')](_0x4d7cb3=>Message[_0x47d7f5('0x11f')](_0x4d7cb3))[_0x47d7f5('0x115')](_0x1eccfc=>{const _0x3e1e95=_0x13dd89,_0x5e5438={..._0x1eccfc};return _0x5e5438[_0x3e1e95('0xd6')]=_0x51d43b[_0x1eccfc['sender_id']],_0x5e5438;});const _0x10815d={};return _0x10815d[_0x47d7f5('0xe9')]=_0x5d39a8,_0x10815d['minId']=_0x41ba8b,_0x10815d['total']=_0x11eed7,_0x10815d;});},exports[_0x3ab177('0x12e')+_0x3fd959('0x132')]=async({id:_0x49a896,user_id:_0x472a4a,socketClient:_0x3258d3})=>{const _0x222662=_0x3fd959,_0x5f0a29=_0x3fd959,_0x34a365={};_0x34a365['yrQfZ']=function(_0x306c4e,_0x2dff24){return _0x306c4e&&_0x2dff24;};const _0x322344=_0x34a365,_0x5b4a73=await Chat['getById'](_0x49a896);return Chat[_0x222662('0x12e')](_0x49a896)[_0x222662('0x118')](_0x4a1286=>{const _0x3f1014=_0x5f0a29;return Message['deleteByCh'+_0x3f1014('0xdf')](_0x49a896);})[_0x5f0a29('0x118')](async _0xcc573=>{const _0x577d07=_0x5f0a29,_0xe4bc3a=_0x222662,_0x340663=JSON['parse'](_0x5b4a73[_0x577d07('0x146')]),_0x365ab8=chatPartnerId(_0x340663,_0x472a4a);if(_0x322344[_0xe4bc3a('0x14b')](_0x365ab8,_0x3258d3)){partner=await User[_0xe4bc3a('0x10b')](_0x365ab8);if(partner[_0xe4bc3a('0xd4')]){const _0x681fb2={};_0x681fb2[_0xe4bc3a('0x140')]=_0x49a896,_0x3258d3['emit'](CONSTS['SKT_LTS_SI'+_0x577d07('0xf0')],{'to':partner[_0x577d07('0xd4')],'event':CONSTS[_0xe4bc3a('0x110')+_0x577d07('0x14a')],'args':_0x681fb2});}}return!![];});},exports[_0x3fd959('0xd0')+'sgInfoReq']=async _0x4ca3c8=>{const _0x17c4ad=_0x3fd959,_0x45161c=_0x3fd959,_0x47538c={};_0x47538c[_0x17c4ad('0x149')]=function(_0x33d6ab,_0x3f6298){return _0x33d6ab-_0x3f6298;};const _0x40f7a5=_0x47538c;let _0x1813a2={},_0x4d5e8f=0x1df7+0x9db+-0x27d2,_0x15b573;return Chat[_0x17c4ad('0xe7')+'s'](_0x4ca3c8)[_0x45161c('0x118')](_0x45e1ec=>{const _0x5ebf2c=_0x17c4ad,_0x2486ef=_0x45161c,_0xba98e3={};_0xba98e3[_0x5ebf2c('0xfb')]=function(_0xd13cb5,_0x10b853){return _0xd13cb5===_0x10b853;},_0xba98e3[_0x5ebf2c('0x128')]=function(_0x1522be,_0x5af7f2){const _0xa1ba95=_0x5ebf2c;return _0x40f7a5[_0xa1ba95('0x149')](_0x1522be,_0x5af7f2);},_0xba98e3[_0x2486ef('0x101')]=function(_0x45e8f1,_0x4f1504){return _0x45e8f1>_0x4f1504;},_0xba98e3[_0x5ebf2c('0xd3')]=function(_0x2c1e5a,_0x2c2170){return _0x2c1e5a-_0x2c2170;};const _0x3d3746=_0xba98e3;let _0x221bcc=[0x24a*0x7+-0x24f0+0x14ea];return _0x45e1ec=_0x45e1ec[_0x5ebf2c('0xe8')](_0x52884d=>{const _0x300af7=_0x2486ef,_0x7e6100=_0x2486ef,_0x150747=JSON['parse'](_0x52884d[_0x300af7('0x146')]),_0x5af0fa=_0x150747[_0x7e6100('0xdc')](_0x4ca3c8),_0x519330=_0x3d3746['KXgGk'](_0x5af0fa,-0x14d1+0x4a*0x3+-0x1*-0x13f3)||_0x5af0fa===_0x3d3746[_0x300af7('0x128')](_0x150747[_0x7e6100('0x114')],0x43a+-0x4f1*-0x7+0x48*-0x8a);if(_0x519330){const _0xbf1fab=JSON[_0x300af7('0x10e')](_0x52884d[_0x7e6100('0x113')+'s'])||[-0x4*0x83f+0x1470+0xc8c,0x47*-0x31+-0x1f*-0x4+0x3d*0x37],_0x3b917b=_0xbf1fab[_0x5af0fa]||0x2*-0x16f+-0x366+0x191*0x4;_0x1813a2[_0x52884d['id']]=_0x3b917b,_0x4d5e8f+=_0x3b917b||-0xdd8+0x1*0x1bfd+-0xe25,_0x221bcc[_0x300af7('0x12b')](_0x3d3746[_0x300af7('0x101')](_0x150747[_0x7e6100('0x114')],-0x636+-0x573+-0x3*-0x3e3)?_0x150747[_0x3d3746[_0x300af7('0xd3')](_0x3d3746[_0x300af7('0xd3')](_0x150747[_0x300af7('0x114')],0x2129*0x1+0x8a*0x2+-0x223c),_0x5af0fa)]:0x2*-0xf69+0x10f5+0x7*0x1fb);}return _0x519330;}),_0x15b573=_0x45e1ec,User[_0x2486ef('0x144')](_0x221bcc);})[_0x45161c('0x118')](_0x3543b4=>{const _0x513a35=_0x45161c,_0x162f0f=_0x17c4ad,_0x903281={};_0x903281[_0x513a35('0x137')]=function(_0x5aeb7d,_0x2cdf65){const _0x5a20f1=_0x513a35;return _0x40f7a5[_0x5a20f1('0x149')](_0x5aeb7d,_0x2cdf65);};const _0x45d12d=_0x903281;let _0x57cc8e={};_0x3543b4[_0x162f0f('0x134')](_0x4edde8=>{const _0x5cfcc0=_0x513a35;_0x57cc8e[_0x4edde8['id'][_0x5cfcc0('0xd2')]()]=User['output'](_0x4edde8);}),_0x15b573=_0x15b573[_0x513a35('0x115')](_0x41c338=>{const _0x55c5d6=_0x513a35,_0x5c2503=_0x513a35,_0x1d8a51=JSON[_0x55c5d6('0x10e')](_0x41c338[_0x5c2503('0x146')]),_0x5e1ec5=_0x1d8a51[_0x5c2503('0xdc')](_0x4ca3c8),_0x363862=_0x1d8a51[_0x45d12d[_0x55c5d6('0x137')](_0x45d12d[_0x55c5d6('0x137')](_0x1d8a51['length'],0xbfb+0x185a+-0x2454),_0x5e1ec5)],_0x42e574={...Chat[_0x55c5d6('0x11f')](_0x41c338)};return _0x42e574[_0x5c2503('0xd6')]=User['output'](_0x57cc8e[_0x363862]),_0x42e574;});const _0x2bbb36={};return _0x2bbb36[_0x162f0f('0x13d')]=_0x4d5e8f,_0x2bbb36[_0x513a35('0x113')+'s']=_0x1813a2,_0x2bbb36[_0x162f0f('0x109')]=_0x15b573,_0x2bbb36;});},exports['rejectChat'+_0x3ab177('0x132')]=async({chat_id:_0x14c60d})=>{const _0x5053b2=_0x3ab177,_0xd3c5ea=_0x3ab177,_0x207ea0={};_0x207ea0[_0x5053b2('0xe1')]=_0xd3c5ea('0x148')+_0xd3c5ea('0xe2');const _0x150a59=_0x207ea0;let _0x3757d4=await Chat[_0xd3c5ea('0x10b')](_0x14c60d);if(!_0x3757d4){const _0x39518b={};return _0x39518b[_0x5053b2('0xfe')]=![],_0x39518b['message']=_0x150a59['azIQW'],_0x39518b;}return _0x3757d4[_0x5053b2('0xf3')+_0x5053b2('0xfd')]=-0xff+-0x25*0x4a+-0x1*-0xbb3,Chat[_0x5053b2('0xe5')](_0x3757d4)['then'](_0x4f920c=>{const _0xcc4662=_0x5053b2,_0xc757cf={};return _0xc757cf[_0xcc4662('0xfe')]=!![],_0xc757cf['data']=_0x4f920c,_0xc757cf;});},exports[_0x3fd959('0xda')+_0x3ab177('0xf9')]=async _0x143411=>{const _0x3a66cd=_0x3fd959,_0x172b87=_0x3ab177;return User[_0x3a66cd('0x10b')](_0x143411)[_0x172b87('0x118')](_0x3b2016=>Chat[_0x3a66cd('0x11a')+'User'](_0x143411,_0x3b2016[_0x172b87('0x112')+'r']))[_0x3a66cd('0x118')](_0x1bed39=>_0x1bed39);};