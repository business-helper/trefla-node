const _0x1468=['w3vPzf0=','y3jLyxrLtM9YBwfSq2HHDfjLCq==','C29JA2v0x2LK','yM9KEq==','z2v0vw5YzwfKtxnNsw5MB1jLCq==','ywnJzxb0x3n0yxr1CW==','yxzHAwXHyMXLq2HHDhjVB21Z','BwvZC2fNzq==','ANnVBG==','BgfZDf9TzxnZywDLCW==','DxnLCL9Pzhm=','AxngB3jdyxjK','DgHLBG==','BgvUz3rO','C3rYAw5NAwz5','lI4VBw9KzwXZl3vZzxiUBw9KzwW=','Bg9Hze1LC3nHz2vszxe=','CMvJzwL2zxi=','BwfW','CMvJzwL2zxjFAwq=','zM9YrwfJAa==','CgfNAw5HDgLVBG==','lI4VAgvSCgvYCY9TB2rLBc5OzwXWzxjZ','CgfYC2u=','C3vJy2vZCW==','zgvSzxrLqNLjza==','zMLSDgvY','z2v0qNLvC2vYswrZ','u0Tux0Xuu19tsu5hteu=','ywnJzxb0q2HHDenVBM5Ly3rPB25szxe=','y2f0y2G=','CgvUzgLUz0nOyxrYB29TCW==','zgvSzxrLqNLdAgf0swq=','ywXS','z2v0qNLjza==','z2v0qNLjzhm=','Bg9N','z2v0q2HHDfrVq2fYza==','y3jLyxrL','CMvQzwn0q2HHDfjLCq==','Dw5YzwfKx251Bxm=','q2HHDcbKB2vZig5VDcbLEgLZDce=','lI4VBw9KzwXZl2nOyxqUBw9KzwW=','q2HHDcbYB29TignYzwf0zwqH','Dg9tDhjPBMC=','CgfYyw1Z','y3vYCMvUDf9JAgf0','C2f2zq==','z2v0twLUswq=','B3v0Chv0','ywXSq2HHDhnpzLvZzxi=','ChvZAa==','y2fYzf9UDw1Izxi=','Aw5KzxHpzG==','y3jLyxrLq2fYzenOyxrszxe=','BM9Kzs1PBNb1Dc12ywXPzgf0B3i=','lI4VBw9KzwXZl21LC3nHz2uUBw9KzwW=','C2vUzgvYx2LK','u0Tux0niqvrFrevmrvrfra==','DxnLCG==','zgvSzxrLqNLjzfjLCq=='];(function(_0x483459,_0x3f5d98){const _0x1468af=function(_0x4c6e0a){while(--_0x4c6e0a){_0x483459['push'](_0x483459['shift']());}};_0x1468af(++_0x3f5d98);}(_0x1468,0x1e9));const _0x4c6e=function(_0x483459,_0x3f5d98){_0x483459=_0x483459-0xd0;let _0x1468af=_0x1468[_0x483459];if(_0x4c6e['hTKsIN']===undefined){var _0x4c6e0a=function(_0x5e8ee7){const _0x573674='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x4a100c=String(_0x5e8ee7)['replace'](/=+$/,'');let _0x157628='';for(let _0x36f84d=0x0,_0x2fc5d9,_0x5f295e,_0x480c96=0x0;_0x5f295e=_0x4a100c['charAt'](_0x480c96++);~_0x5f295e&&(_0x2fc5d9=_0x36f84d%0x4?_0x2fc5d9*0x40+_0x5f295e:_0x5f295e,_0x36f84d++%0x4)?_0x157628+=String['fromCharCode'](0xff&_0x2fc5d9>>(-0x2*_0x36f84d&0x6)):0x0){_0x5f295e=_0x573674['indexOf'](_0x5f295e);}return _0x157628;};_0x4c6e['rDkwKe']=function(_0x421fa9){const _0x23d309=_0x4c6e0a(_0x421fa9);let _0x269e5b=[];for(let _0x259e92=0x0,_0x7fafc4=_0x23d309['length'];_0x259e92<_0x7fafc4;_0x259e92++){_0x269e5b+='%'+('00'+_0x23d309['charCodeAt'](_0x259e92)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x269e5b);},_0x4c6e['rEuSJO']={},_0x4c6e['hTKsIN']=!![];}const _0x1bd7e7=_0x4c6e['rEuSJO'][_0x483459];return _0x1bd7e7===undefined?(_0x1468af=_0x4c6e['rDkwKe'](_0x1468af),_0x4c6e['rEuSJO'][_0x483459]=_0x1468af):_0x1468af=_0x1bd7e7,_0x1468af;};const _0x2023b0=_0x4c6e,{Validator}=require(_0x2023b0(0x106)),CONSTS=require('../constants/socket.constant'),Chat=require(_0x2023b0(0xf9)),User=require(_0x2023b0(0xde)),Message=require(_0x2023b0(0x107)),{getTokenInfo}=require('../helpers/auth.helpers'),{bool2Int,chatPartnerId,getTotalLikes,generateTZTimeString,respondError}=require('../helpers/common.helpers'),{generateChatData,generateMessageData,getLastMsgIndexOfChat}=require(_0x2023b0(0xe5));exports['create']=async(_0x1bd7e7,_0x5e8ee7)=>{const _0x178b98=_0x2023b0,{uid:_0x573674}=getTokenInfo(_0x1bd7e7),_0x4a100c=_0x1bd7e7[_0x178b98(0xd2)][_0x178b98(0xe2)]?await User['getById'](_0x1bd7e7[_0x178b98(0xd2)][_0x178b98(0xe2)]):null;let _0x157628=generateChatData(_0x1bd7e7['body'],_0x573674,_0x4a100c);const _0x36f84d=_0x1bd7e7[_0x178b98(0xd2)][_0x178b98(0xd6)]?generateMessageData({..._0x1bd7e7[_0x178b98(0xd2)],'sender_id':_0x573674,'receiver_id':_0x4a100c?_0x4a100c['id']:0x0,'message':_0x1bd7e7[_0x178b98(0xd2)][_0x178b98(0xd6)]}):null;return Chat[_0x178b98(0xf5)](_0x157628)[_0x178b98(0xdb)](_0x2fc5d9=>Promise['all']([_0x2fc5d9,User[_0x178b98(0xf1)](_0x573674),_0x36f84d?Message[_0x178b98(0xf5)]({..._0x36f84d,'chat_id':_0x2fc5d9['id']}):null]))[_0x178b98(0xdb)](([_0x5f295e,_0x480c96,_0x421fa9])=>{const _0xea8233=_0x178b98;return _0x5f295e=Chat[_0xea8233(0x100)](_0x5f295e),_0x5f295e[_0xea8233(0xe0)]=User['output'](_0x4a100c),_0x5e8ee7[_0xea8233(0xd7)]({'status':!![],'message':'Chat\x20room\x20created!','data':_0x5f295e});})[_0x178b98(0xed)](_0x23d309=>respondError(_0x5e8ee7,_0x23d309));},exports['getById']=async(_0x269e5b,_0x259e92)=>{const _0x29f6c6=_0x2023b0,{uid:_0x7fafc4}=getTokenInfo(_0x269e5b),{id:_0x1d4c5e}=_0x269e5b[_0x29f6c6(0xfc)],_0x4528a8=0x1e,_0x38b707=null;return Chat[_0x29f6c6(0xf1)](_0x1d4c5e)[_0x29f6c6(0xdb)](_0x314356=>{const _0x1b72c1=_0x29f6c6,_0x2d6e08=JSON[_0x1b72c1(0xe6)](_0x314356[_0x1b72c1(0xd9)]);let _0x281e42=_0x2d6e08[_0x1b72c1(0x104)](_0x7fafc4);_0x281e42===-0x1&&(_0x281e42=0x0);const _0x17e48c=_0x2d6e08['length']-_0x281e42-0x1;return Promise[_0x1b72c1(0xf0)]([_0x314356,_0x2d6e08[_0x1b72c1(0xdc)]>0x0?User[_0x1b72c1(0xf1)](_0x2d6e08[_0x17e48c]):null,Message[_0x1b72c1(0xe4)]({'limit':_0x4528a8,'last_id':_0x38b707,'chat_id':_0x314356['id']})]);})[_0x29f6c6(0xdb)](([_0x400495,_0x1261af,_0x5d2c5d])=>{const _0xf333e6=_0x29f6c6;return _0x400495=Chat[_0xf333e6(0x100)](_0x400495),_0x259e92['json']({'status':!![],'message':'success','data':{..._0x400495,'user':User[_0xf333e6(0x100)](_0x1261af)}});})[_0x29f6c6(0xed)](_0x4836e0=>respondError(_0x259e92,_0x4836e0));},exports[_0x2023b0(0xee)]=async(_0x255e76,_0x226678)=>{const _0x25aab7=_0x2023b0,{uid:_0x570694}=getTokenInfo(_0x255e76);return console[_0x25aab7(0xf3)](_0x25aab7(0x10c),_0x570694),Chat[_0x25aab7(0xee)](_0x570694)[_0x25aab7(0xdb)](_0x1ce364=>{const _0x19f3af=_0x25aab7;let _0x23c394=[0x0];for(let _0x249e63 of _0x1ce364){let _0x5194ad=JSON[_0x19f3af(0xe6)](_0x249e63['user_ids']);_0x5194ad['length']>0x1&&(_0x23c394[_0x19f3af(0x102)](_0x5194ad[0x0]),_0x23c394['push'](_0x5194ad[_0x5194ad[_0x19f3af(0xdc)]-0x1]));}const _0x34303c=User[_0x19f3af(0xf2)](_0x23c394);return Promise[_0x19f3af(0xf0)]([_0x1ce364,_0x34303c]);})[_0x25aab7(0xdb)](([_0x568a30,_0xf184a5])=>{const _0x47169a=_0x25aab7;let _0x54f6a5={};return _0xf184a5[_0x47169a(0xe3)](_0x4e92f5=>{const _0x13bae8=_0x47169a;_0x54f6a5[_0x4e92f5['id']]=User[_0x13bae8(0x100)](_0x4e92f5);}),_0x568a30=_0x568a30[_0x47169a(0xe1)](_0x10ed32=>Chat[_0x47169a(0x100)](_0x10ed32))[_0x47169a(0xe1)](_0x4c164f=>{const _0x23269c=_0x47169a,_0x4678a0=_0x4c164f['user_ids'],_0x3109ac=chatPartnerId(_0x4c164f[_0x23269c(0xd9)],_0x570694);return{..._0x4c164f,'isSent':_0x4678a0[0x0]===_0x570694,'user':_0x54f6a5[_0x3109ac['toString']()]};}),_0x226678[_0x47169a(0xd7)]({'status':!![],'message':_0x47169a(0xe7),'data':_0x568a30});})[_0x25aab7(0xed)](_0x1693da=>respondError(_0x226678,_0x1693da));},exports[_0x2023b0(0xd5)]=async(_0x19b660,_0x138ba8)=>{const _0x2d7560=_0x2023b0,{uid:_0x394804}=getTokenInfo(_0x19b660);return Chat['myChatrooms'](_0x394804,0x1)[_0x2d7560(0xdb)](_0x5d40a5=>{const _0x1a9a6a=_0x2d7560;let _0x3fba14=[0x0];for(let _0x355181 of _0x5d40a5){let _0x4b8ee3=JSON[_0x1a9a6a(0xe6)](_0x355181[_0x1a9a6a(0xd9)]);_0x4b8ee3[_0x1a9a6a(0xdc)]>0x1&&(_0x3fba14[_0x1a9a6a(0x102)](_0x4b8ee3[0x0]),_0x3fba14[_0x1a9a6a(0x102)](_0x4b8ee3[_0x4b8ee3[_0x1a9a6a(0xdc)]-0x1]));}const _0x208873=User['getByIds'](_0x3fba14);return Promise[_0x1a9a6a(0xf0)]([_0x5d40a5,_0x208873]);})['then'](([_0x4119e8,_0x532b8b])=>{const _0x2c4076=_0x2d7560;let _0x26279a={};return _0x532b8b[_0x2c4076(0xe3)](_0x5a12b5=>{_0x26279a[_0x5a12b5['id']]=User['output'](_0x5a12b5);}),_0x4119e8=_0x4119e8['map'](_0x2ba4dc=>Chat[_0x2c4076(0x100)](_0x2ba4dc))[_0x2c4076(0xe1)](_0x552a05=>{const _0x39882a=_0x2c4076;let _0x185472=[_0x552a05[_0x39882a(0xd9)][0x0]];_0x552a05[_0x39882a(0xd9)]['length']>0x1&&_0x185472[_0x39882a(0x102)](_0x552a05[_0x39882a(0xd9)][_0x552a05['user_ids'][_0x39882a(0xdc)]-0x1]);const _0x289c71=_0x185472[0x0]===_0x394804?_0x185472[0x1]:_0x185472[0x0];return{..._0x552a05,'user':_0x26279a[_0x289c71['toString']()]};}),_0x138ba8[_0x2c4076(0xd7)]({'status':!![],'message':_0x2c4076(0xe7),'data':_0x4119e8});})['catch'](_0x262155=>respondError(_0x138ba8,_0x262155));},exports[_0x2023b0(0xd0)]=async(_0x24daf1,_0x1fcaf3,_0x5b1465=!![])=>{const _0x447209=_0x2023b0,_0x50e5eb=_0x1fcaf3[_0x447209(0xe2)]?await User[_0x447209(0xf1)](_0x1fcaf3[_0x447209(0xe2)]):null;let _0x48d45c=generateChatData(_0x1fcaf3,_0x24daf1,_0x50e5eb);_0x48d45c[_0x447209(0xd4)]=!_0x5b1465?0x1:0x0;const _0x356fa4=_0x1fcaf3[_0x447209(0xd6)]?generateMessageData({..._0x1fcaf3,'sender_id':_0x24daf1,'receiver_id':_0x50e5eb?_0x50e5eb['id']:0x0,'message':_0x1fcaf3[_0x447209(0xd6)]}):null;let _0x20a0ed;if(_0x50e5eb){let _0xd74566=await Chat[_0x447209(0xea)]({'sender_id':_0x24daf1,'receiver_id':_0x50e5eb['id'],'isForCard':0x0});_0xd74566[_0x447209(0xe9)](_0x8bffb9=>{const _0x54979d=_0x447209,_0x399327=JSON[_0x54979d(0xe6)](_0x8bffb9[_0x54979d(0xd9)]);return _0x399327[_0x54979d(0xdc)]===0x2;}),_0xd74566[_0x447209(0xdc)]>0x0&&(_0x20a0ed=_0xd74566[0x0]);}return Promise[_0x447209(0xf0)]([_0x20a0ed?_0x20a0ed:Chat[_0x447209(0xf5)](_0x48d45c),User[_0x447209(0xf1)](_0x24daf1),_0x356fa4?Message[_0x447209(0xf5)]({..._0x356fa4,'chat_id':chat['id']}):null])['then'](([_0x49aeef,_0x2fc761,_0x590b32])=>{const _0x575e79=_0x447209;return _0x49aeef=Chat['output'](_0x49aeef),_0x49aeef[_0x575e79(0x10a)]=User[_0x575e79(0x100)](_0x50e5eb),{'status':!![],'message':_0x575e79(0xfa),'data':_0x49aeef};});},exports[_0x2023b0(0x105)]=async(_0x584609,_0x514cb2,_0x4cf596)=>{const _0x1d8c57=_0x2023b0,_0x13be95=_0x514cb2['receiver_id']?await User[_0x1d8c57(0xf1)](_0x514cb2[_0x1d8c57(0xe2)]):null;let _0x3b9fa1=generateChatData(_0x514cb2,_0x584609,_0x13be95);_0x3b9fa1[_0x1d8c57(0xd4)]=!_0x4cf596?0x1:0x0;const _0xf50708=_0x514cb2[_0x1d8c57(0xd6)]?generateMessageData({..._0x514cb2,'sender_id':_0x584609,'receiver_id':_0x13be95?_0x13be95['id']:0x0,'message':_0x514cb2[_0x1d8c57(0xd6)]}):null;let _0x59857c,_0x3114de=await Chat[_0x1d8c57(0xf4)]({'card_number':_0x514cb2[_0x1d8c57(0x103)],'user_id':_0x584609});const _0x207efd=_0x3114de[_0x1d8c57(0xe9)](_0x33ac1c=>{const _0x5554ca=_0x1d8c57,_0x531277=JSON[_0x5554ca(0xe6)](_0x33ac1c['user_ids']);return _0x531277[0x0]===_0x584609;});return _0x207efd['length']>0x0&&(_0x59857c=_0x207efd[0x0]),Promise['all']([_0x59857c?_0x59857c:Chat[_0x1d8c57(0xf5)](_0x3b9fa1),User[_0x1d8c57(0xf1)](_0x584609)])[_0x1d8c57(0xdb)](([_0x77f24f,_0x3471f0])=>Promise[_0x1d8c57(0xf0)]([_0x77f24f,_0x3471f0,_0xf50708?Message[_0x1d8c57(0xf5)]({..._0xf50708,'chat_id':_0x77f24f['id']}):null]))[_0x1d8c57(0xdb)](([_0x2a4b8e,_0x2bffc2,_0x9e0d5])=>{const _0x361f11=_0x1d8c57;return _0x2a4b8e=Chat[_0x361f11(0x100)](_0x2a4b8e),_0x2a4b8e[_0x361f11(0x10a)]=User['output'](_0x13be95),{'status':!![],'message':_0x361f11(0xfa),'data':_0x2a4b8e,'msg':_0x9e0d5};});},exports[_0x2023b0(0xec)]=async _0x334592=>{const _0x3ccb00=_0x2023b0;return Chat[_0x3ccb00(0xf1)](_0x334592)[_0x3ccb00(0xdb)](_0x3ffd31=>{const _0x5eb439=_0x3ccb00;return _0x3ffd31['accept_status']=0x1,Chat[_0x5eb439(0xfe)](_0x3ffd31);})['then'](_0x5d1441=>{const _0x136dcf=_0x3ccb00;return Chat[_0x136dcf(0x100)](_0x5d1441);});},exports['addMessageReq']=async({sender_id:_0x95a05e,receiver_id:_0x16df17,chat_id:_0x4e2eb9,payload:_0x14bff2})=>{const _0x43777f=_0x2023b0;let _0x472fd3,_0x58bf8a,_0x3c5a20;return Promise[_0x43777f(0xf0)]([Chat[_0x43777f(0xf1)](_0x4e2eb9),User[_0x43777f(0xf1)](_0x95a05e),User[_0x43777f(0xf1)](_0x16df17)])[_0x43777f(0xdb)](async([_0x332830,_0x281722,_0x7b85e2])=>{const _0xcc573=_0x43777f;_0x58bf8a=_0x281722,_0x3c5a20=_0x7b85e2;let _0x818412=JSON[_0xcc573(0xe6)](_0x332830['last_messages']);const _0x487a01=JSON['parse'](_0x332830[_0xcc573(0xd9)]),_0x453595=0x0;_0x818412[_0x453595]={'msg':_0x14bff2[_0xcc573(0xd6)],'time':generateTZTimeString()},_0x332830[_0xcc573(0xd8)]=JSON[_0xcc573(0xdd)](_0x818412);let _0x2580b5=![],_0x1be652=JSON[_0xcc573(0xe6)](_0x332830[_0xcc573(0xf7)]);if(_0x7b85e2&&_0x7b85e2[_0xcc573(0xfd)]!==_0x332830['id']){_0x2580b5=!![];const _0x4bb106=_0x487a01[_0xcc573(0x104)](_0x16df17);_0x1be652[_0x4bb106]++,_0x332830[_0xcc573(0xf7)]=JSON[_0xcc573(0xdd)](_0x1be652);}else{if(_0x332830[_0xcc573(0xda)]&&!_0x332830['card_verified']){_0x2580b5=!![];const _0x338252=_0x487a01[_0xcc573(0xdc)];unread_num=_0x1be652[_0x338252]||0x0,_0x1be652[_0x338252]=unread_num+0x1,_0x332830[_0xcc573(0xf7)]=JSON[_0xcc573(0xdd)](_0x1be652);}}const _0xb7f30b=generateMessageData({..._0x14bff2,'sender_id':_0x95a05e,'receiver_id':_0x16df17,'chat_id':_0x4e2eb9});return Promise[_0xcc573(0xf0)]([Message[_0xcc573(0xf5)](_0xb7f30b),Chat[_0xcc573(0xfe)](_0x332830),_0x2580b5]);})[_0x43777f(0xdb)](([_0x3cdb91,_0xe5375,_0x347573])=>{const _0x16a099=_0x43777f;return _0x3cdb91=Message['output'](_0x3cdb91),{'message':_0x3cdb91,'chat':Chat[_0x16a099(0x100)](_0xe5375),'unread_updated':_0x347573};});},exports[_0x2023b0(0xdf)]=async({myId:myId=null,chat_id:_0x5d202f,last_id:_0x34e534,limit:_0x17be5a})=>{const _0x9ae25b=_0x2023b0,_0x12e950=await Chat['getById'](_0x5d202f),_0x32d86d=JSON[_0x9ae25b(0xe6)](_0x12e950[_0x9ae25b(0xd9)]),_0x4e98fa=_0x32d86d[0x0]===myId;let _0x598317=0x0,_0x5522f8=0x0;return Promise[_0x9ae25b(0xf0)]([Message[_0x9ae25b(0xe4)]({'limit':_0x17be5a,'last_id':_0x34e534,'chat_id':_0x5d202f,'minId':_0x5522f8,'maxId':_0x598317}),Message['getAll']({'chat_id':_0x5d202f,'minId':_0x5522f8,'maxId':_0x598317}),Message[_0x9ae25b(0xff)]({'chat_id':_0x5d202f}),User[_0x9ae25b(0xf2)](_0x32d86d)])[_0x9ae25b(0xdb)](([_0x59d4a4,_0x1713e1,_0x2d35e6,_0x225c92])=>{const _0x5d397b=_0x9ae25b;let _0x2288ec={};return _0x225c92[_0x5d397b(0xe3)](_0x24ee60=>{const _0x19b95c=_0x5d397b;_0x2288ec[_0x24ee60['id'][_0x19b95c(0xfb)]()]=User[_0x19b95c(0x100)](_0x24ee60);}),_0x59d4a4=_0x59d4a4['map'](_0xc60bbf=>Message['output'](_0xc60bbf))['map'](_0x34200d=>{const _0x586cbf=_0x5d397b;return{..._0x34200d,'user':_0x2288ec[_0x34200d[_0x586cbf(0x108)]]};}),{'messages':_0x59d4a4,'minId':_0x2d35e6,'total':_0x1713e1};});},exports[_0x2023b0(0x10b)]=async({id:_0x373225,user_id:_0x10032a,socketClient:_0x2b83ec})=>{const _0x37b7af=_0x2023b0,_0x5af313=await Chat[_0x37b7af(0xf1)](_0x373225);return Chat[_0x37b7af(0xe8)](_0x373225)[_0x37b7af(0xdb)](_0x65a2fb=>{const _0x3303fb=_0x37b7af;return Message[_0x3303fb(0xef)](_0x373225);})[_0x37b7af(0xdb)](async _0x79aabd=>{const _0x1128f5=_0x37b7af,_0x34e5f7=JSON[_0x1128f5(0xe6)](_0x5af313[_0x1128f5(0xd9)]),_0x21de35=chatPartnerId(_0x34e5f7,_0x10032a);return _0x21de35&&_0x2b83ec&&(partner=await User[_0x1128f5(0xf1)](_0x21de35),partner[_0x1128f5(0xd1)]&&_0x2b83ec['emit'](CONSTS[_0x1128f5(0xeb)],{'to':partner['socket_id'],'event':CONSTS[_0x1128f5(0x109)],'args':{'chat_id':_0x373225}})),!![];});},exports[_0x2023b0(0xd3)]=async _0x41ef4e=>{const _0xdde3cf=_0x2023b0;let _0x178a61={},_0x395144=0x0,_0x13758a;return Chat['myChatrooms'](_0x41ef4e)[_0xdde3cf(0xdb)](_0xe2917e=>{const _0x1ec813=_0xdde3cf;let _0x550f95=[0x0];return _0xe2917e=_0xe2917e[_0x1ec813(0xe9)](_0x21e3cb=>{const _0x477c08=_0x1ec813,_0x493bb6=JSON[_0x477c08(0xe6)](_0x21e3cb[_0x477c08(0xd9)]),_0x5d6d0d=_0x493bb6['indexOf'](_0x41ef4e),_0x1dfc21=_0x5d6d0d===0x0||_0x5d6d0d===_0x493bb6[_0x477c08(0xdc)]-0x1;if(_0x1dfc21){const _0x307cfe=JSON[_0x477c08(0xe6)](_0x21e3cb[_0x477c08(0xf7)])||[0x0,0x0],_0x49e633=_0x307cfe[_0x5d6d0d]||0x0;_0x178a61[_0x21e3cb['id']]=_0x49e633,_0x395144+=_0x49e633||0x0,_0x550f95['push'](_0x493bb6['length']>0x0?_0x493bb6[_0x493bb6['length']-0x1-_0x5d6d0d]:0x0);}return _0x1dfc21;}),_0x13758a=_0xe2917e,User[_0x1ec813(0xf2)](_0x550f95);})[_0xdde3cf(0xdb)](_0xac5ade=>{const _0x42ad3f=_0xdde3cf;let _0x34aef6={};return _0xac5ade[_0x42ad3f(0xe3)](_0x57e9f8=>{const _0x4a6c50=_0x42ad3f;_0x34aef6[_0x57e9f8['id']['toString']()]=User[_0x4a6c50(0x100)](_0x57e9f8);}),_0x13758a=_0x13758a[_0x42ad3f(0xe1)](_0x17b053=>{const _0x5b2c70=_0x42ad3f,_0x2ab30c=JSON[_0x5b2c70(0xe6)](_0x17b053['user_ids']),_0x50cf3a=_0x2ab30c['indexOf'](_0x41ef4e),_0x57da3b=_0x2ab30c[_0x2ab30c['length']-0x1-_0x50cf3a];return{...Chat['output'](_0x17b053),'user':User[_0x5b2c70(0x100)](_0x34aef6[_0x57da3b])};}),{'total':_0x395144,'unread_nums':_0x178a61,'chats':_0x13758a};});},exports[_0x2023b0(0xf6)]=async({chat_id:_0x480001})=>{const _0x2a2411=_0x2023b0;let _0x28c34b=await Chat['getById'](_0x480001);if(!_0x28c34b)return{'status':![],'message':_0x2a2411(0xf8)};return _0x28c34b['accept_status']=0x2,Chat[_0x2a2411(0xfe)](_0x28c34b)['then'](_0x1c74bc=>{return{'status':!![],'data':_0x1c74bc};});},exports['getAllChatsOfUser']=async _0x3fae51=>{const _0x566206=_0x2023b0;return User['getById'](_0x3fae51)[_0x566206(0xdb)](_0x19020f=>Chat[_0x566206(0x101)](_0x3fae51,_0x19020f[_0x566206(0x103)]))[_0x566206(0xdb)](_0x39674e=>_0x39674e);};