const _0xc3b3=['y3jLyxrL','DxnLCG==','CgfNAw5HDgLVBG==','iIbKB2vZig5VDcbLEgLZDce=','tM90AwzPy2f0Aw9UigrVzxmGBM90igv4Axn0iq==','Cg9ZDa==','zxHWCMvZCW==','vxnLCIb3AxrOigLKici=','sw52ywXPzcbYzxf1zxn0iq==','ywXS','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq==','y2f0y2G=','l3bHz2LUyxrPB24=','CgfYyw1Z','zgvSzxrL','DgHLBG==','y2HLy2S=','lI4Vy29UDhjVBgXLCNmVBM90AwzPy2f0Aw9UlMnVBNrYB2XSzxi=','C2vUzgvYx2LK','l3jLywq=','ywrKug9ZDfj1Bgu=','sw52ywXPzcbYzxf1zxn0','lI4VBw9KzwXZl25VDgLMAwnHDgLVBI5TB2rLBa==','CMvJzwL2zxjFAwq=','tM90AwzPy2f0Aw9UihDPDgGGAwqGiG==','yM9KEq==','DxnL','iIbKB2vZig5VDcbLEgLZDhmH','BM9Kzs1PBNb1Dc12ywXPzgf0B3i=','Aw5WDxrZ','lZPPza==','zxjYB3i=','y3vZDg9T','DxnLCL9Pza==','lI4VAgvSCgvYCY9HDxrOlMHLBhbLCNm=','z2v0','yxnZAwDU','CMvXDwLYzwr8Aw50zwDLCG==','z2v0qNLjza==','zxjYB3jZ','BwfYA0fZuMvHza=='];(function(_0x41f7fa,_0x5f211d){const _0xc3b302=function(_0x31883){while(--_0x31883){_0x41f7fa['push'](_0x41f7fa['shift']());}};_0xc3b302(++_0x5f211d);}(_0xc3b3,0xd2));const _0x3188=function(_0x41f7fa,_0x5f211d){_0x41f7fa=_0x41f7fa-0x1d9;let _0xc3b302=_0xc3b3[_0x41f7fa];if(_0x3188['uzSsph']===undefined){var _0x31883=function(_0x1d8126){const _0x3d4968='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x265eca=String(_0x1d8126)['replace'](/=+$/,'');let _0xb9cdcf='';for(let _0x2bc92d=0x0,_0x2cb5b5,_0x3866ea,_0x1d1ae1=0x0;_0x3866ea=_0x265eca['charAt'](_0x1d1ae1++);~_0x3866ea&&(_0x2cb5b5=_0x2bc92d%0x4?_0x2cb5b5*0x40+_0x3866ea:_0x3866ea,_0x2bc92d++%0x4)?_0xb9cdcf+=String['fromCharCode'](0xff&_0x2cb5b5>>(-0x2*_0x2bc92d&0x6)):0x0){_0x3866ea=_0x3d4968['indexOf'](_0x3866ea);}return _0xb9cdcf;};_0x3188['ppwYCd']=function(_0x4562ea){const _0x399ac8=_0x31883(_0x4562ea);let _0x5bced1=[];for(let _0x330762=0x0,_0x4f545f=_0x399ac8['length'];_0x330762<_0x4f545f;_0x330762++){_0x5bced1+='%'+('00'+_0x399ac8['charCodeAt'](_0x330762)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5bced1);},_0x3188['cxuouv']={},_0x3188['uzSsph']=!![];}const _0x52cfa5=_0x3188['cxuouv'][_0x41f7fa];return _0x52cfa5===undefined?(_0xc3b302=_0x3188['ppwYCd'](_0xc3b302),_0x3188['cxuouv'][_0x41f7fa]=_0xc3b302):_0xc3b302=_0x52cfa5,_0xc3b302;};const _0x56c8d4=_0x3188,express=require(_0x56c8d4(0x1da)),{Validator}=require(_0x56c8d4(0x1f0)),notificationRouters=express['Router'](),notificationCtrl=require(_0x56c8d4(0x1e5)),Notification=require(_0x56c8d4(0x1ea)),User=require('../models/user.model'),{BearerMiddleware}=require(_0x56c8d4(0x1de)),{getTokenInfo}=require(_0x56c8d4(0x1f6)),{respondValidateError}=require('../helpers/common.helpers');notificationRouters[_0x56c8d4(0x1ee)]((_0x52cfa5,_0x1d8126,_0x3d4968)=>{BearerMiddleware(_0x52cfa5,_0x1d8126,_0x3d4968);}),notificationRouters[_0x56c8d4(0x1f7)](_0x56c8d4(0x1e7),async(_0x265eca,_0xb9cdcf)=>{const _0x3d1ae0=_0x56c8d4,{uid:_0x2bc92d}=getTokenInfo(_0x265eca),_0x2cb5b5=new Validator({'user_id':_0x2bc92d},{'user_id':_0x3d1ae0(0x1f9)});return _0x2cb5b5['addPostRule'](async _0x3866ea=>{const _0x4a81d1=_0x3d1ae0;User[_0x4a81d1(0x1fa)](_0x3866ea[_0x4a81d1(0x1f1)][_0x4a81d1(0x1f5)])[_0x4a81d1(0x1e3)](_0x1d1ae1=>{const _0x2b5982=_0x4a81d1;!_0x1d1ae1&&_0x3866ea[_0x2b5982(0x1f3)](_0x2b5982(0x1fe),_0x2b5982(0x1f4),'User\x20does\x20not\x20exist!');});}),_0x2cb5b5['check']()[_0x3d1ae0(0x1e3)](_0x4562ea=>{const _0x5ead5d=_0x3d1ae0;if(!_0x4562ea)throw Object[_0x5ead5d(0x1f8)](new Error(_0x5ead5d(0x1dc)),{'code':0x190,'details':_0x2cb5b5['errors']});})[_0x3d1ae0(0x1e3)](()=>notificationCtrl['markAllAsRead'](_0x265eca,_0xb9cdcf))['catch'](_0x399ac8=>respondValidateError(_0xb9cdcf,_0x399ac8));}),notificationRouters[_0x56c8d4(0x1f7)]('/:id/read',async(_0x5bced1,_0x330762)=>{const _0x574810=_0x56c8d4,_0x4f545f=new Validator({'id':_0x5bced1[_0x574810(0x1e1)]['id']},{'id':_0x574810(0x1f9)});return _0x4f545f[_0x574810(0x1e8)](async _0x39b1fd=>Promise[_0x574810(0x1dd)]([Notification[_0x574810(0x1fa)](_0x39b1fd[_0x574810(0x1f1)]['id'])])[_0x574810(0x1e3)](([_0x3be00b])=>{const _0x5a1f39=_0x574810;!_0x3be00b&&_0x39b1fd[_0x5a1f39(0x1f3)]('id',_0x5a1f39(0x1f4),_0x5a1f39(0x201));})),_0x4f545f[_0x574810(0x1e4)]()[_0x574810(0x1e3)](_0x303510=>{const _0x39789d=_0x574810;if(!_0x303510)throw Object[_0x39789d(0x1f8)](new Error(_0x39789d(0x1dc)),{'code':0x190,'details':_0x4f545f['errors']});})[_0x574810(0x1e3)](()=>notificationCtrl[_0x574810(0x1fc)](_0x5bced1,_0x330762))[_0x574810(0x1df)](_0x23ce1e=>respondValidateError(_0x330762,_0x23ce1e));}),notificationRouters['get'](_0x56c8d4(0x1f2),async(_0xf2f21b,_0x21427f)=>{const _0x1b16e7=_0x56c8d4,_0x16b780=new Validator({'id':_0xf2f21b['params']['id']},{'id':_0x1b16e7(0x1f9)});return _0x16b780[_0x1b16e7(0x1e8)](async _0x3c1906=>Promise[_0x1b16e7(0x1dd)]([Notification[_0x1b16e7(0x1fa)](_0x3c1906['inputs']['id'])])['then'](([_0x5e56d4])=>{const _0x2791d8=_0x1b16e7;!_0x5e56d4&&_0x3c1906[_0x2791d8(0x1f3)]('id',_0x2791d8(0x1f4),'Notification\x20with\x20id\x20\x22'+_0x3c1906[_0x2791d8(0x1f1)]['id']+_0x2791d8(0x200));})),_0x16b780[_0x1b16e7(0x1e4)]()[_0x1b16e7(0x1e3)](_0x2f653a=>{const _0x5e05a3=_0x1b16e7;if(!_0x2f653a)throw Object['assign'](new Error(_0x5e05a3(0x1e9)),{'code':0x190,'details':_0x16b780[_0x5e05a3(0x1fb)]});})['then'](()=>notificationCtrl[_0x1b16e7(0x1fa)](_0xf2f21b,_0x21427f))[_0x1b16e7(0x1df)](_0x50f77d=>respondValidateError(_0x21427f,_0x50f77d));}),notificationRouters['post'](_0x56c8d4(0x1e0),async(_0x3346bf,_0x14c331)=>{const _0x182c48=_0x56c8d4,_0xf9acfc=new Validator(_0x3346bf[_0x182c48(0x1ed)],{'limit':_0x182c48(0x1f9)});return _0xf9acfc['check']()[_0x182c48(0x1e3)](_0x262836=>{const _0x543275=_0x182c48;if(!_0x262836)throw Object['assign'](new Error(_0x543275(0x1e9)),{'code':0x190,'details':_0xf9acfc[_0x543275(0x1fb)]});})[_0x182c48(0x1e3)](()=>notificationCtrl[_0x182c48(0x1ff)](_0x3346bf,_0x14c331))[_0x182c48(0x1df)](_0x240ae6=>respondValidateError(_0x14c331,_0x240ae6));}),notificationRouters[_0x56c8d4(0x1d9)]('/',async(_0x247993,_0x54d19b)=>{const _0x2a9a2f=_0x56c8d4,_0x98ad1b=new Validator(_0x247993['body'],{'sender_id':'required|integer','receiver_id':'required|integer','type':_0x2a9a2f(0x1f9),'optional_val':'required'});return _0x98ad1b[_0x2a9a2f(0x1e8)](async _0x5c8721=>Promise['all']([User[_0x2a9a2f(0x1fa)](_0x5c8721['inputs']['sender_id']),User['getById'](_0x5c8721[_0x2a9a2f(0x1f1)]['receiver_id'])])[_0x2a9a2f(0x1e3)](([_0x148c53,_0x3f6464])=>{const _0x41d4e6=_0x2a9a2f;!_0x148c53&&_0x5c8721[_0x41d4e6(0x1f3)]('sender_id',_0x41d4e6(0x1f4),_0x41d4e6(0x1db)+_0x5c8721[_0x41d4e6(0x1f1)][_0x41d4e6(0x1e6)]+_0x41d4e6(0x1ef)),!_0x3f6464&&_0x5c8721['error']('id',_0x41d4e6(0x1f4),_0x41d4e6(0x1db)+_0x5c8721['inputs'][_0x41d4e6(0x1eb)]+_0x41d4e6(0x1ef));})),_0x98ad1b[_0x2a9a2f(0x1e4)]()[_0x2a9a2f(0x1e3)](_0x2bb93d=>{const _0x48ad23=_0x2a9a2f;if(!_0x2bb93d)throw Object[_0x48ad23(0x1f8)](new Error(_0x48ad23(0x1e9)),{'code':0x190,'details':_0x98ad1b[_0x48ad23(0x1fb)]});})['then'](()=>notificationCtrl[_0x2a9a2f(0x1fd)](_0x247993,_0x54d19b))[_0x2a9a2f(0x1df)](_0x153b05=>respondValidateError(_0x54d19b,_0x153b05));}),notificationRouters[_0x56c8d4(0x1e2)](_0x56c8d4(0x1f2),async(_0x5816f9,_0x442127)=>{const _0x46852a=_0x56c8d4,_0x156b9c=new Validator({'id':_0x5816f9[_0x46852a(0x1e1)]['id']},{'id':_0x46852a(0x1f9)});return _0x156b9c[_0x46852a(0x1e8)](async _0x20a1d4=>Promise['all']([Notification[_0x46852a(0x1fa)](_0x20a1d4[_0x46852a(0x1f1)]['id'])])[_0x46852a(0x1e3)](([_0x58a8ce])=>{const _0x195d94=_0x46852a;!_0x58a8ce&&_0x20a1d4[_0x195d94(0x1f3)]('id','custom',_0x195d94(0x1ec)+_0x20a1d4[_0x195d94(0x1f1)]['id']+_0x195d94(0x200));})),_0x156b9c['check']()[_0x46852a(0x1e3)](_0x319e32=>{const _0x52c55f=_0x46852a;if(!_0x319e32)throw Object[_0x52c55f(0x1f8)](new Error(_0x52c55f(0x1e9)),{'code':0x190,'details':_0x156b9c['errors']});})[_0x46852a(0x1e3)](()=>notificationCtrl['deleteById'](_0x5816f9,_0x442127))[_0x46852a(0x1df)](_0x29a8af=>respondValidateError(_0x442127,_0x29a8af));}),notificationRouters[_0x56c8d4(0x1e2)]('/',async(_0xcfdfd4,_0x37f2b7)=>{const _0xa13d3=_0x56c8d4;return notificationCtrl['deleteAll'](_0xcfdfd4,_0x37f2b7)[_0xa13d3(0x1df)](_0x4872d4=>respondValidateError(_0x37f2b7,_0x4872d4));}),module['exports']=notificationRouters;