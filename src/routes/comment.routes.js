const _0x5681=['B3v0Chv0','mZeYmJuXsKrSzu9b','y2HLy2TbBgXVD2vK','lZPPzc9KAxnSAwTL','vxnLCIb3AxrOigLKici','nZiXmJuYsw5ksMvU','lI4VBw9KzwXZl3vZzxiUBw9KzwW','ANnVBG','w0nVBw1LBNqGAwrD','DxnLCL9Pza','y3jLyxrL','iIbKB2vZig5VDcbLEgLZDhmH','nenkD0TLra','lI4VAgvSCgvYCY9JB21TB24UAgvSCgvYCW','C3bSAxq','z2v0qNLvC2vYswq','BM9Kzs1PBNb1Dc12ywXPzgf0B3i','CMvXDwLYzwq','ww91ignHBM5VDcbKzwXLDguGDgHPCYbJB21Tzw50iq','y2HLy2S','C2LTCgXLugfNAw5HDgLVBG','zgLZBgLRzunVBw1LBNq','sw52ywXPzcbYzxf1zxn0','mteZnerKDhn5wq','zgvSzxrLqNLjza','vMfSAwrHDgLVBIbgywLSzwqH','zg9mAwTLq29TBwvUDa','BgvUz3rO','mu9RtuPOqG','CMvXDwLYzwr8Aw50zwDLCG','CxvLCNK','Cg9ZDa','Bg9N','CgfYyw1Z','yM9VBgvHBG','ue9tva','lZPPzc90B2DNBguTBgLRzq','Aw5WDxrZ','lI4VBw9KzwXZl3bVC3qUBw9KzwW','ndqYv1HhAvbN','u1vqrvi','ugvYBwLZC2LVBIbKzw5PzwqH','vgfYz2v0ihbVC3qGB3iGy29TBwvUDcb3AxrOigLKici','mZyZnJfMsLbctLa','y2f0y2G','lZPPzc9SAwTL','mJriq1LMseO','uM91DgvY','z2v0','ywXS','CMvXDwLYzwr8Aw50zwDLCNXIzxr3zwvUoJeSnG','lI4VAgvSCgvYCW','l3bHz2LUyxrPB24','yM9KEq','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq','zxjYB3i','zxHWCMvZCW','DgHLBG','DxbKyxrLqNLjza','y2HLy2Tbzg1PBLbLCM1PC3nPB24','DhLWzq','lI4Vy29UC3rHBNrZl2nVBw1VBI5JB25ZDgfUDa','lI4VBw9KzwXZ','z2v0qNLjza','DgfYz2v0x2LK','lI4VAgvSCgvYCY9HDxrOlMHLBhbLCNm','CgfNAw5HDgLVBG','Cgf0y2G','yxnZAwDU','ywrKug9ZDfj1Bgu','iIbKB2vZig5VDcbLEgLZDce','ntaXnLDNwK93ra','zgvSzxrL','Dg9Nz2XLq29TBwvUDeXPA2u','q29TBwvUDcb3AxrOigLKici','ndi3mJy2rMXeuMrn','zxjYB3jZ','odG0ndbQvK9kBhe','vxnLCIbKB2vZig5VDcbLEgLZDce','q29TBwvUDcbKB2vZig5VDcbLEgLZDce','y3vZDg9T','vgfYz2v0ignVBw1LBNqGzg9LCYbUB3qGzxHPC3qH'];const _0x1217=function(_0x55219f,_0xf058d3){_0x55219f=_0x55219f-0x1e5;let _0x5681a5=_0x5681[_0x55219f];if(_0x1217['dDhpqZ']===undefined){var _0x1217e0=function(_0x3c884e){const _0x13d4c2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4bad8a='';for(let _0x38ab16=0x0,_0x3eb268,_0x28044c,_0x394b4d=0x0;_0x28044c=_0x3c884e['charAt'](_0x394b4d++);~_0x28044c&&(_0x3eb268=_0x38ab16%0x4?_0x3eb268*0x40+_0x28044c:_0x28044c,_0x38ab16++%0x4)?_0x4bad8a+=String['fromCharCode'](0xff&_0x3eb268>>(-0x2*_0x38ab16&0x6)):0x0){_0x28044c=_0x13d4c2['indexOf'](_0x28044c);}return _0x4bad8a;};_0x1217['UZcTCl']=function(_0xc7987d){const _0x24ee7a=_0x1217e0(_0xc7987d);let _0x432660=[];for(let _0x2c5404=0x0,_0x9da40e=_0x24ee7a['length'];_0x2c5404<_0x9da40e;_0x2c5404++){_0x432660+='%'+('00'+_0x24ee7a['charCodeAt'](_0x2c5404)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x432660);},_0x1217['prKjET']={},_0x1217['dDhpqZ']=!![];}const _0x2c3eea=_0x5681[0x0],_0x2042bc=_0x55219f+_0x2c3eea,_0x28f7e1=_0x1217['prKjET'][_0x2042bc];return _0x28f7e1===undefined?(_0x5681a5=_0x1217['UZcTCl'](_0x5681a5),_0x1217['prKjET'][_0x2042bc]=_0x5681a5):_0x5681a5=_0x28f7e1,_0x5681a5;};const _0x7feb9e=_0x1217;(function(_0x572c09,_0x5e751f){const _0x2182c0=_0x1217;while(!![]){try{const _0x2e711f=parseInt(_0x2182c0(0x228))+-parseInt(_0x2182c0(0x1f8))*-parseInt(_0x2182c0(0x208))+-parseInt(_0x2182c0(0x22c))+parseInt(_0x2182c0(0x20c))*parseInt(_0x2182c0(0x20f))+-parseInt(_0x2182c0(0x1fd))*-parseInt(_0x2182c0(0x22e))+parseInt(_0x2182c0(0x1e6))+-parseInt(_0x2182c0(0x234))*parseInt(_0x2182c0(0x1ed));if(_0x2e711f===_0x5e751f)break;else _0x572c09['push'](_0x572c09['shift']());}catch(_0x3b5f51){_0x572c09['push'](_0x572c09['shift']());}}}(_0x5681,0x7d14a));const express=require(_0x7feb9e(0x219)),{Validator}=require(_0x7feb9e(0x1f1)),commentRouters=express[_0x7feb9e(0x210)](),commentCtrl=require('../controllers/comment.controller'),Post=require(_0x7feb9e(0x207)),User=require(_0x7feb9e(0x1e7)),Comment=require('../models/comment.model'),models=require(_0x7feb9e(0x21f)),helpers=require(_0x7feb9e(0x214)),{BearerMiddleware}=require(_0x7feb9e(0x217)),{getTokenInfo}=require(_0x7feb9e(0x222)),{respondValidateError}=require(_0x7feb9e(0x1ee)),{ADMIN_ROLE}=require(_0x7feb9e(0x21e)),activity={'checkAdminPermission':async(_0x2c3eea,_0x2042bc)=>{const _0x565890=_0x7feb9e,{role:_0x28f7e1,role2:_0x3c884e,uid:_0x13d4c2}=getTokenInfo(_0x2c3eea);if(_0x28f7e1!=='ADMIN')return![];if(_0x3c884e===ADMIN_ROLE[_0x565890(0x209)])return!![];const _0x4bad8a=models['adminPermission'][_0x565890(0x233)](await models['adminPermission'][_0x565890(0x1f0)](_0x13d4c2));return activity[_0x565890(0x235)](_0x4bad8a,_0x2042bc);},'checkAllowed':(_0x38ab16,_0x3eb268=null)=>{const _0x1f151d=_0x7feb9e;if(typeof _0x3eb268===_0x1f151d(0x203))return _0x3eb268;else{if(_0x3eb268===null||_0x3eb268===''||_0x3eb268===undefined)return!![];}const _0x28044c=_0x3eb268[_0x1f151d(0x1ef)]('.');if(_0x28044c['length']===0x1)return _0x38ab16[_0x28044c[0x0]];else{if(_0x28044c['length']===0x2)return _0x38ab16[_0x28044c[0x0]][_0x28044c[0x1]];else{if(_0x28044c['length']===0x3)return _0x38ab16[_0x28044c[0x0]][_0x28044c[0x1]][_0x28044c[0x2]];else{if(_0x28044c[_0x1f151d(0x1fc)]===0x4)return _0x38ab16[_0x28044c[0x0]][_0x28044c[0x1]][_0x28044c[0x2]][_0x28044c[0x3]];}}}return![];}};commentRouters['use']((_0x394b4d,_0xc7987d,_0x24ee7a)=>{BearerMiddleware(_0x394b4d,_0xc7987d,_0x24ee7a);}),commentRouters['get']('/:id',async(_0x432660,_0x2c5404)=>{const _0x30833c=_0x7feb9e,_0x9da40e=new Validator({'id':_0x432660[_0x30833c(0x202)]['id']},{'id':_0x30833c(0x1fe)});return _0x9da40e[_0x30833c(0x226)](async _0x141532=>Promise[_0x30833c(0x212)]([Comment['getById'](_0x141532['inputs']['id'])])[_0x30833c(0x21a)](([_0x312a24])=>{const _0x25e435=_0x30833c;!_0x312a24&&_0x141532[_0x25e435(0x218)]('id',_0x25e435(0x231),_0x25e435(0x22b)+_0x141532['inputs']['id']+_0x25e435(0x1ec));})),_0x9da40e[_0x30833c(0x1f4)]()[_0x30833c(0x21a)](_0x17823=>{const _0x2cfbd3=_0x30833c;if(!_0x17823)throw Object['assign'](new Error(_0x2cfbd3(0x1f7)),{'code':0x190,'details':_0x9da40e[_0x2cfbd3(0x22d)]});})['then'](()=>commentCtrl[_0x30833c(0x220)](_0x432660,_0x2c5404))['catch'](_0x10c779=>respondValidateError(_0x2c5404,_0x10c779));}),commentRouters[_0x7feb9e(0x211)]('/',async(_0x20f9cc,_0x2cfdd9)=>{const _0x3ff317=_0x7feb9e,_0x3c393e=await activity[_0x3ff317(0x21c)](_0x20f9cc,'comment.show');if(!_0x3c393e)return _0x2cfdd9['status'](0x193)[_0x3ff317(0x1e8)]({'status':![],'message':_0x3ff317(0x20a)});const _0x2f04aa=new Validator(_0x20f9cc[_0x3ff317(0x1ff)],{'limit':_0x3ff317(0x1fe),'page':_0x3ff317(0x1fe)});return _0x2f04aa['check']()[_0x3ff317(0x21a)](_0x31ce40=>{const _0x57ee23=_0x3ff317;if(!_0x31ce40)throw Object[_0x57ee23(0x225)](new Error(_0x57ee23(0x1fa)),{'code':0x190,'details':_0x2f04aa[_0x57ee23(0x22d)]});})[_0x3ff317(0x21a)](()=>commentCtrl[_0x3ff317(0x1f5)](_0x20f9cc,_0x2cfdd9))['then'](_0x3b72c4=>_0x2cfdd9[_0x3ff317(0x1e8)](_0x3b72c4))[_0x3ff317(0x20d)](_0x164ec3=>respondValidateError(_0x2cfdd9,_0x164ec3));}),commentRouters[_0x7feb9e(0x200)](_0x7feb9e(0x215),async(_0x38d338,_0x4f559b)=>{const _0x447417=_0x7feb9e,_0x4839ee=new Validator(_0x38d338[_0x447417(0x216)],{'limit':_0x447417(0x1fe)});return _0x4839ee[_0x447417(0x1f4)]()[_0x447417(0x21a)](_0x30e6b5=>{const _0x248d86=_0x447417;if(!_0x30e6b5)throw Object[_0x248d86(0x225)](new Error('Invalid\x20request'),{'code':0x190,'details':_0x4839ee[_0x248d86(0x22d)]});})[_0x447417(0x21a)](()=>commentCtrl[_0x447417(0x223)](_0x38d338,_0x4f559b))[_0x447417(0x20d)](_0x21d308=>respondValidateError(_0x4f559b,_0x21d308));}),commentRouters[_0x7feb9e(0x200)](_0x7feb9e(0x205),async(_0x29827f,_0x265065)=>{const _0x3e04d0=_0x7feb9e,{uid:_0x4cf816}=getTokenInfo(_0x29827f),{type:_0x1fc4c6}=_0x29827f[_0x3e04d0(0x216)],_0x457114=new Validator({'id':_0x29827f[_0x3e04d0(0x202)]['id'],'user_id':_0x4cf816,'type':_0x1fc4c6},{'id':_0x3e04d0(0x1fe),'user_id':_0x3e04d0(0x1fe),'type':_0x3e04d0(0x213)});return _0x457114[_0x3e04d0(0x226)](async _0x172c77=>Promise[_0x3e04d0(0x212)]([Comment[_0x3e04d0(0x220)](_0x172c77[_0x3e04d0(0x206)]['id']),User[_0x3e04d0(0x220)](_0x172c77[_0x3e04d0(0x206)][_0x3e04d0(0x1ea)])])['then'](([_0x37d31d,_0x471918])=>{const _0x2fb202=_0x3e04d0;!_0x37d31d&&_0x172c77[_0x2fb202(0x218)]('id',_0x2fb202(0x231),'Comment\x20with\x20id\x20\x22'+_0x172c77[_0x2fb202(0x206)]['id']+'\x22\x20does\x20not\x20exists!'),!_0x471918&&_0x172c77[_0x2fb202(0x218)]('id','custom',_0x2fb202(0x1e5)+_0x172c77['inputs'][_0x2fb202(0x1ea)]+_0x2fb202(0x1ec));})),_0x457114[_0x3e04d0(0x1f4)]()[_0x3e04d0(0x21a)](_0x24e31e=>{const _0x797f95=_0x3e04d0;if(!_0x24e31e)throw Object[_0x797f95(0x225)](new Error(_0x797f95(0x1f7)),{'code':0x190,'details':_0x457114[_0x797f95(0x22d)]});})['then'](()=>commentCtrl[_0x3e04d0(0x22a)](_0x29827f,_0x265065))[_0x3e04d0(0x20d)](_0x659fca=>respondValidateError(_0x265065,_0x659fca));}),commentRouters[_0x7feb9e(0x200)](_0x7feb9e(0x20e),async(_0x2fedfb,_0x3da07b)=>{const _0x52efdf=_0x7feb9e,{uid:_0x2d6b33}=getTokenInfo(_0x2fedfb),{type:_0x325196}=_0x2fedfb[_0x52efdf(0x216)],_0x3ce91c=new Validator({'id':_0x2fedfb[_0x52efdf(0x202)]['id'],'user_id':_0x2d6b33,'type':_0x325196},{'id':_0x52efdf(0x1fe),'user_id':_0x52efdf(0x1fe),'type':_0x52efdf(0x213)});return _0x3ce91c[_0x52efdf(0x226)](async _0x3cd51c=>Promise[_0x52efdf(0x212)]([Comment[_0x52efdf(0x220)](_0x3cd51c[_0x52efdf(0x206)]['id']),User['getById'](_0x3cd51c[_0x52efdf(0x206)][_0x52efdf(0x1ea)])])[_0x52efdf(0x21a)](([_0xb418d9,_0xe0a78d])=>{const _0x4343d8=_0x52efdf;!_0xb418d9&&_0x3cd51c[_0x4343d8(0x218)]('id',_0x4343d8(0x231),'Target\x20comment\x20does\x20not\x20exist!'),!_0xe0a78d&&_0x3cd51c[_0x4343d8(0x218)]('id','custom',_0x4343d8(0x22f));})),_0x3ce91c[_0x52efdf(0x1f4)]()[_0x52efdf(0x21a)](_0x38d6ae=>{const _0x4a9684=_0x52efdf;if(!_0x38d6ae)throw Object[_0x4a9684(0x225)](new Error('Invalid\x20request'),{'code':0x190,'details':_0x3ce91c[_0x4a9684(0x22d)]});})['then'](()=>commentCtrl[_0x52efdf(0x1fb)](_0x2fedfb,_0x3da07b))['catch'](_0x26846a=>respondValidateError(_0x3da07b,_0x26846a));}),commentRouters[_0x7feb9e(0x200)](_0x7feb9e(0x236),async(_0x59e237,_0x243dc9)=>{const _0x1e0751=_0x7feb9e,{uid:_0x1bdc2a}=getTokenInfo(_0x59e237),{type:_0x13721f}=_0x59e237[_0x1e0751(0x216)],_0x44c9de=new Validator({'id':_0x59e237['params']['id'],'user_id':_0x1bdc2a,'type':_0x13721f},{'id':'required|integer','user_id':_0x1e0751(0x1fe),'type':'required|integer|between:1,6'});return _0x44c9de[_0x1e0751(0x226)](async _0x23162b=>Promise['all']([Comment[_0x1e0751(0x220)](_0x23162b[_0x1e0751(0x206)]['id']),User['getById'](_0x23162b[_0x1e0751(0x206)][_0x1e0751(0x1ea)])])[_0x1e0751(0x21a)](([_0x486a9a,_0x423bf2])=>{const _0x5e5846=_0x1e0751;!_0x486a9a&&_0x23162b[_0x5e5846(0x218)]('id','custom',_0x5e5846(0x232)),!_0x423bf2&&_0x23162b[_0x5e5846(0x218)]('id','custom',_0x5e5846(0x22f));})),_0x44c9de[_0x1e0751(0x1f4)]()[_0x1e0751(0x21a)](_0x29822b=>{const _0x42d282=_0x1e0751;if(!_0x29822b)throw Object[_0x42d282(0x225)](new Error(_0x42d282(0x1f7)),{'code':0x190,'details':_0x44c9de[_0x42d282(0x22d)]});})[_0x1e0751(0x21a)](()=>commentCtrl[_0x1e0751(0x1f6)](_0x59e237,_0x243dc9))['catch'](_0x2827fa=>respondValidateError(_0x243dc9,_0x2827fa));}),commentRouters[_0x7feb9e(0x200)]('/',async(_0x36347b,_0x876ea9)=>{const _0x13df2f=_0x7feb9e,{uid:_0x32cbed}=getTokenInfo(_0x36347b),_0x564619=new Validator({..._0x36347b[_0x13df2f(0x216)],'user_id':_0x32cbed},{'user_id':'required|integer','type':_0x13df2f(0x1f2),'comment':'required','target_id':_0x13df2f(0x1f2),'isGuest':_0x13df2f(0x1fe)});return _0x564619['addPostRule'](async _0x249929=>Promise[_0x13df2f(0x212)]([_0x249929[_0x13df2f(0x206)][_0x13df2f(0x21d)]===_0x13df2f(0x204)?Post[_0x13df2f(0x220)](_0x249929['inputs'][_0x13df2f(0x221)]):Comment[_0x13df2f(0x220)](_0x249929[_0x13df2f(0x206)][_0x13df2f(0x221)])])[_0x13df2f(0x21a)](([_0x25e4e3])=>{const _0x68427d=_0x13df2f;if(!_0x25e4e3)_0x249929[_0x68427d(0x218)]('target_id',_0x68427d(0x231),_0x68427d(0x20b)+_0x249929['inputs'][_0x68427d(0x221)]+_0x68427d(0x227));else _0x25e4e3['type']=='COMMENT'&&_0x249929[_0x68427d(0x218)](_0x68427d(0x221),_0x68427d(0x231),'This\x20action\x20is\x20not\x20allowed!');})),_0x564619['check']()[_0x13df2f(0x21a)](_0x18a9bd=>{const _0x168ac3=_0x13df2f;if(!_0x18a9bd)throw Object[_0x168ac3(0x225)](new Error('Invalid\x20request'),{'code':0x190,'details':_0x564619[_0x168ac3(0x22d)]});})['then'](()=>commentCtrl[_0x13df2f(0x1eb)](_0x36347b,_0x876ea9))[_0x13df2f(0x20d)](_0x46f87e=>respondValidateError(_0x876ea9,_0x46f87e));}),commentRouters[_0x7feb9e(0x224)]('/:id',async(_0x51b9d6,_0x5d9cd0)=>{const _0x36958b=_0x7feb9e,_0x5ee4ec=new Validator({'id':_0x51b9d6[_0x36958b(0x202)]['id'],..._0x51b9d6[_0x36958b(0x216)]},{'id':_0x36958b(0x1fe)});return _0x5ee4ec[_0x36958b(0x226)](async _0x12b58a=>Promise['all']([Comment[_0x36958b(0x220)](_0x12b58a[_0x36958b(0x206)]['id'])])[_0x36958b(0x21a)](([_0x45bd46])=>{const _0x2b4d7c=_0x36958b;!_0x45bd46&&_0x12b58a[_0x2b4d7c(0x218)]('id',_0x2b4d7c(0x231),_0x2b4d7c(0x22b)+_0x12b58a[_0x2b4d7c(0x206)]['id']+_0x2b4d7c(0x1ec));})),_0x5ee4ec[_0x36958b(0x1f4)]()[_0x36958b(0x21a)](_0x2899c8=>{const _0x52c801=_0x36958b;if(!_0x2899c8)throw Object[_0x52c801(0x225)](new Error(_0x52c801(0x1f7)),{'code':0x190,'details':_0x5ee4ec[_0x52c801(0x22d)]});})[_0x36958b(0x21a)](()=>commentCtrl[_0x36958b(0x21b)](_0x51b9d6,_0x5d9cd0))[_0x36958b(0x20d)](_0x44382a=>respondValidateError(_0x5d9cd0,_0x44382a));}),commentRouters[_0x7feb9e(0x229)]('/:id',async(_0x136e60,_0x1907e6)=>{const _0x35107a=_0x7feb9e,{role:_0x862cc5}=getTokenInfo(_0x136e60),{uid:_0x5a0a2d}=getTokenInfo(_0x136e60),_0x32beb3=new Validator({'id':_0x136e60[_0x35107a(0x202)]['id']},{'id':'required|integer'});return console[_0x35107a(0x201)](_0x35107a(0x1e9),_0x136e60[_0x35107a(0x202)]['id']),_0x32beb3['addPostRule'](async _0x15addf=>Promise[_0x35107a(0x212)]([Comment['getById'](_0x15addf['inputs']['id'])])[_0x35107a(0x21a)](([_0x127be0])=>{const _0x3deec8=_0x35107a;if(!_0x127be0)_0x15addf[_0x3deec8(0x218)]('id',_0x3deec8(0x231),_0x3deec8(0x230));else _0x862cc5!=='ADMIN'&&_0x127be0[_0x3deec8(0x1ea)]!==_0x5a0a2d&&_0x15addf[_0x3deec8(0x218)]('id',_0x3deec8(0x231),_0x3deec8(0x1f3));})),_0x32beb3[_0x35107a(0x1f4)]()[_0x35107a(0x21a)](_0x550bdb=>{const _0xc26a6c=_0x35107a;if(!_0x550bdb)throw Object['assign'](new Error(_0xc26a6c(0x1f7)),{'code':0x190,'details':_0x32beb3[_0xc26a6c(0x22d)]});})[_0x35107a(0x21a)](()=>commentCtrl[_0x35107a(0x1f9)](_0x136e60,_0x1907e6))[_0x35107a(0x20d)](_0x45bf4b=>respondValidateError(_0x1907e6,_0x45bf4b));}),module['exports']=commentRouters;