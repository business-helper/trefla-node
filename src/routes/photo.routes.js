const _0x5958=['vxnLCIbKB2vZBID0igv4Axn0ihDPDgGGDgHLigDPDMvUigLKiq==','l3vWBg9HzhmV','ywrKug9ZDfj1Bgu=','yxnZzxrZl3vWBg9Hzhm=','sw5JB21PBMDgB3jT','lI4Vy29UDhjVBgXLCNmVCgHVDg8Uy29UDhjVBgXLCG==','CMvXDwLYzwq=','BM9Kzs1PBNb1Dc12ywXPzgf0B3i=','y3vZDg9T','CgfYC2u=','rMLSzsbOyxmGyMvLBIb1CgXVywrLzce=','BMfTzq==','lZPPza==','CgfYyw1Z','l3vZzxiVoMLK','Dw5SAw5R','z2v0qNLjza==','zxHWCMvZCW==','ywXS','z2v0','l3vWBg9Hza==','AM9PBG==','Aw5WDxrZ','BwvZC2fNzq==','CMvXDwLYzwr8Aw50zwDLCG==','Cgf0Aa==','zgvSzxrL','zxHWB3j0CW==','zMLSzq==','yxnZAwDU','CMvHzezPBgu=','z2v0qwXSt2zvC2vY','zM9YBwLKywjSzq==','rMfPBgvKihrVihDYAxrLigzPBguUlI4=','rMfPBgvKihrVigrLBgv0zsbMAwXLlI4U','DxnL','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq==','sw52ywXPzcbYzxf1zxn0','zgvSzxrLqNLjza==','y2HLy2S=','DxvPza==','yM9KEq==','lI4Vy29UzMLNl2fWCc5JB25MAwC=','DgHLBG==','D3jPDgvgAwXL','zxjYB3i=','ugHVDg8GD2L0AcbPzcaI','y3jLyxrL','ANnVBG==','y2f0y2G=','iIbKB2vZig5VDcbLEgLZDhmH','zxjYB3jZ','rMfPBgvKihrVihjLywqGzMLSzs4UlG==','Cg9ZDa=='];(function(_0x95b50d,_0xb2df5e){const _0x595835=function(_0x140769){while(--_0x140769){_0x95b50d['push'](_0x95b50d['shift']());}};_0x595835(++_0xb2df5e);}(_0x5958,0x1e6));const _0x1407=function(_0x95b50d,_0xb2df5e){_0x95b50d=_0x95b50d-0x7d;let _0x595835=_0x5958[_0x95b50d];if(_0x1407['rpXjCs']===undefined){var _0x140769=function(_0x2e7ed6){const _0x3c74f5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=',_0x2c5204=String(_0x2e7ed6)['replace'](/=+$/,'');let _0x4fc4cf='';for(let _0x34b8e1=0x0,_0x53b219,_0x308185,_0x2fd195=0x0;_0x308185=_0x2c5204['charAt'](_0x2fd195++);~_0x308185&&(_0x53b219=_0x34b8e1%0x4?_0x53b219*0x40+_0x308185:_0x308185,_0x34b8e1++%0x4)?_0x4fc4cf+=String['fromCharCode'](0xff&_0x53b219>>(-0x2*_0x34b8e1&0x6)):0x0){_0x308185=_0x3c74f5['indexOf'](_0x308185);}return _0x4fc4cf;};_0x1407['ghSleG']=function(_0x9093c4){const _0x3f47b1=_0x140769(_0x9093c4);let _0xda1f53=[];for(let _0x1e8f13=0x0,_0x3a9a34=_0x3f47b1['length'];_0x1e8f13<_0x3a9a34;_0x1e8f13++){_0xda1f53+='%'+('00'+_0x3f47b1['charCodeAt'](_0x1e8f13)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xda1f53);},_0x1407['tCyqQh']={},_0x1407['rpXjCs']=!![];}const _0x4af528=_0x1407['tCyqQh'][_0x95b50d];return _0x4af528===undefined?(_0x595835=_0x1407['ghSleG'](_0x595835),_0x1407['tCyqQh'][_0x95b50d]=_0x595835):_0x595835=_0x4af528,_0x595835;};const _0x4ef49c=_0x1407,{v4:uuid}=require(_0x4ef49c(0xa5)),express=require(_0x4ef49c(0x8e)),{Validator}=require(_0x4ef49c(0x84)),photoRouters=express['Router'](),formidable=require(_0x4ef49c(0x9d)),fs=require('fs'),os=require('os'),path=require(_0x4ef49c(0x96)),config=require(_0x4ef49c(0xa7)),photoCtrl=require(_0x4ef49c(0x82)),Photo=require('../models/photo.model'),User=require('../models/user.model'),{BearerMiddleware}=require(_0x4ef49c(0xa1)),{getTokenInfo}=require('../helpers/auth.helpers'),{respondValidateError}=require('../helpers/common.helpers');photoRouters[_0x4ef49c(0xa0)]((_0x4af528,_0x2e7ed6,_0x3c74f5)=>{BearerMiddleware(_0x4af528,_0x2e7ed6,_0x3c74f5);}),photoRouters[_0x4ef49c(0x90)](_0x4ef49c(0x8b),async(_0x2c5204,_0x4fc4cf)=>{const _0x4d56cc=_0x4ef49c,_0x34b8e1=new Validator({'id':_0x2c5204[_0x4d56cc(0x8a)]['id']},{'id':'required|integer'});return _0x34b8e1[_0x4d56cc(0x7f)](async _0x53b219=>{const _0x55a519=_0x4d56cc;User['getById'](_0x53b219['inputs']['id'])[_0x55a519(0xa8)](_0x308185=>{const _0x282db0=_0x55a519;!_0x308185&&_0x53b219['error']('id','custom',_0x282db0(0x7d));});}),_0x34b8e1[_0x4d56cc(0xa4)]()[_0x4d56cc(0xa8)](_0x2fd195=>{const _0xcfc090=_0x4d56cc;if(!_0x2fd195)throw Object[_0xcfc090(0x9a)](new Error('Invalid\x20request'),{'code':0x190,'details':_0x34b8e1[_0xcfc090(0xb0)]});})[_0x4d56cc(0xa8)](()=>photoCtrl['getByUserIdReq'](_0x2c5204,_0x4fc4cf))[_0x4d56cc(0xa8)](_0x9093c4=>_0x4fc4cf[_0x4d56cc(0xad)](_0x9093c4))[_0x4d56cc(0xae)](_0x3f47b1=>respondValidateError(_0x4fc4cf,_0x3f47b1));}),photoRouters['get']('/:id',async(_0xda1f53,_0x1e8f13)=>{const _0x571736=_0x4ef49c,_0x3a9a34=new Validator({'id':_0xda1f53['params']['id']},{'id':_0x571736(0x95)});return _0x3a9a34[_0x571736(0x7f)](async _0x1e80c9=>Promise[_0x571736(0x8f)]([Photo[_0x571736(0x8d)](_0x1e80c9[_0x571736(0x93)]['id'])])[_0x571736(0xa8)](([_0x769e4b])=>{const _0x5c9b77=_0x571736;!_0x769e4b&&_0x1e80c9[_0x5c9b77(0xaa)]('id',_0x5c9b77(0x85),_0x5c9b77(0xab)+_0x1e80c9[_0x5c9b77(0x93)]['id']+_0x5c9b77(0xaf));})),_0x3a9a34[_0x571736(0xa4)]()[_0x571736(0xa8)](_0x591bd5=>{const _0x42b171=_0x571736;if(!_0x591bd5)throw Object[_0x42b171(0x9a)](new Error(_0x42b171(0xa2)),{'code':0x190,'details':_0x3a9a34[_0x42b171(0xb0)]});})['then'](()=>photoCtrl[_0x571736(0x8d)](_0xda1f53,_0x1e8f13))['catch'](_0x1e4a14=>respondValidateError(_0x1e8f13,_0x1e4a14));}),photoRouters[_0x4ef49c(0x90)]('/',async(_0x4aba08,_0x2f3672)=>{const _0x1a3a31=_0x4ef49c;return photoCtrl[_0x1a3a31(0x9c)](_0x4aba08,_0x2f3672)[_0x1a3a31(0xae)](_0x28480a=>respondValidateError(_0x2f3672,_0x28480a));}),photoRouters['post'](_0x4ef49c(0x91),async(_0x1dae00,_0x373f4f)=>{const _0x102d92=_0x4ef49c;let _0x186818=formidable[_0x102d92(0x81)]();_0x186818[_0x102d92(0x86)](_0x1dae00,function(_0x3a4b47,_0x7828e,_0x14e582){const _0x27ab69=_0x102d92;let _0x16d190=_0x14e582[_0x27ab69(0x99)]['path'],_0xeea402=path['extname'](_0x14e582[_0x27ab69(0x99)][_0x27ab69(0x88)]),_0x111086=''+uuid()+_0xeea402,_0x240215=path[_0x27ab69(0x92)](path['resolve'](_0x27ab69(0x80)),_0x111086);fs[_0x27ab69(0x9b)](_0x16d190,function(_0x35638b,_0x439932){const _0x1e9d82=_0x27ab69;if(_0x35638b)return _0x373f4f[_0x1e9d82(0xad)]({'status':![],'message':_0x1e9d82(0xb1),'details':_0x35638b[_0x1e9d82(0x94)]});fs[_0x1e9d82(0xa9)](_0x240215,_0x439932,function(_0x3d2b0f){const _0x52d523=_0x1e9d82;if(_0x3d2b0f)return _0x373f4f[_0x52d523(0xad)]({'status':![],'message':_0x52d523(0x9e),'details':_0x3d2b0f[_0x52d523(0x94)]});return fs[_0x52d523(0x8c)](_0x16d190,function(_0x54be2a){const _0x41ffaf=_0x52d523;if(_0x54be2a)return _0x373f4f[_0x41ffaf(0xad)]({'status':![],'message':_0x41ffaf(0x9f),'details':_0x54be2a['message']});}),_0x373f4f[_0x52d523(0xad)]({'status':!![],'message':_0x52d523(0x87),'url':config['domain']+_0x52d523(0x7e)+_0x111086});});});});}),photoRouters[_0x4ef49c(0xb2)]('/',async(_0x3fd7ca,_0x2da56a)=>{const _0x32ef2b=_0x4ef49c,_0x4f3bf8=new Validator({..._0x3fd7ca[_0x32ef2b(0xa6)]},{'url':_0x32ef2b(0x83)});return _0x4f3bf8['check']()[_0x32ef2b(0xa8)](_0x2f670d=>{const _0xbbba21=_0x32ef2b;if(!_0x2f670d)throw Object[_0xbbba21(0x9a)](new Error(_0xbbba21(0xa2)),{'code':0x190,'details':_0x4f3bf8[_0xbbba21(0xb0)]});})[_0x32ef2b(0xa8)](()=>photoCtrl[_0x32ef2b(0xac)](_0x3fd7ca,_0x2da56a))[_0x32ef2b(0xae)](_0x3aee75=>respondValidateError(_0x2da56a,_0x3aee75));}),photoRouters[_0x4ef49c(0x97)](_0x4ef49c(0x89),async(_0x50bed0,_0x5d7a38)=>{const _0x26f412=_0x4ef49c,_0x301de7=new Validator({'id':_0x50bed0[_0x26f412(0x8a)]['id']},{'id':_0x26f412(0x95)});return _0x301de7[_0x26f412(0x7f)](async _0x484866=>Promise[_0x26f412(0x8f)]([Photo[_0x26f412(0x8d)](_0x484866[_0x26f412(0x93)]['id'])])['then'](([_0x4cd783])=>{const _0x5f203b=_0x26f412;!_0x4cd783&&_0x484866[_0x5f203b(0xaa)]('id','custom',_0x5f203b(0xab)+_0x484866[_0x5f203b(0x93)]['id']+_0x5f203b(0xaf));})),_0x301de7[_0x26f412(0xa4)]()[_0x26f412(0xa8)](_0xafd2b7=>{const _0x3d70d8=_0x26f412;if(!_0xafd2b7)throw Object[_0x3d70d8(0x9a)](new Error('Invalid\x20request'),{'code':0x190,'details':_0x301de7[_0x3d70d8(0xb0)]});})[_0x26f412(0xa8)](()=>photoCtrl[_0x26f412(0xa3)](_0x50bed0,_0x5d7a38))[_0x26f412(0xae)](_0x9a1b0e=>respondValidateError(_0x5d7a38,_0x9a1b0e));}),module[_0x4ef49c(0x98)]=photoRouters;