const _0x5958=['zM9YBwLKywjSzq','Dw5SAw5R','vxnLCIbKB2vZBID0igv4Axn0ihDPDgGGDgHLigDPDMvUigLKiq','yxnZAwDU','ANnVBG','y3vZDg9T','zxjYB3jZ','rMLSzsbOyxmGyMvLBIb1CgXVywrLzce','z2v0','mu9uyMfLrq','lI4VAgvSCgvYCY9JB21TB24UAgvSCgvYCW','lI4Vy29UDhjVBgXLCNmVCgHVDg8Uy29UDhjVBgXLCG','y3jLyxrL','sw52ywXPzcbYzxf1zxn0','rMfPBgvKihrVihDYAxrLigzPBguUlI4','mu91zMTLra','z2v0qNLjza','yM9KEq','mtq2mtm1ugjts2PO','BwvZC2fNzq','CgfYC2u','zg9TywLU','z2v0qNLvC2vYswrszxe','l3vZzxiVoMLK','ntCZnNLNvLfesW','DxnL','y2f0y2G','lI4Vy29UzMLNl2fWCc5JB25MAwC','l3vWBg9HzhmV','rMfPBgvKihrVigrLBgv0zsbMAwXLlI4U','mKD5BM5WDG','lI4VAgvSCgvYCY9HDxrOlMHLBhbLCNm','Cg9ZDa','CMvHzezPBgu','lZPPza','yxnZzxrZl3vWBg9Hzhm','Cgf0Aa','DxvPza','nZDst1jOrey','CMvZB2X2zq','Aw5WDxrZ','lI4VBw9KzwXZl3bOB3rVlM1VzgvS','ndyYntK4CMnUy1Ly','ywrKug9ZDfj1Bgu','zxHWB3j0CW','DgHLBG','BM9Kzs1PBNb1Dc12ywXPzgf0B3i','zMLSzq','zxjYB3i','y2HLy2S','lI4VBw9KzwXZl3vZzxiUBw9KzwW','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq','rMfPBgvKihrVihjLywqGzMLSzs4UlG','ugHVDg8GD2L0AcbPzcaI','oda4mtvlEvzsDfC','iIbKB2vZig5VDcbLEgLZDhmH','nJa2odq3ANfhBxrK','uM91DgvY','CgfYyw1Z','l3vWBg9Hza','mtiYmdqYEwP6sfHY','mtaZB3zTEerz'];const _0x1407=function(_0x95b50d,_0xb2df5e){_0x95b50d=_0x95b50d-0x7d;let _0x595835=_0x5958[_0x95b50d];if(_0x1407['eyoyyG']===undefined){var _0x140769=function(_0x2c5204){const _0x4fc4cf='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x34b8e1='';for(let _0x53b219=0x0,_0x308185,_0x2fd195,_0x9093c4=0x0;_0x2fd195=_0x2c5204['charAt'](_0x9093c4++);~_0x2fd195&&(_0x308185=_0x53b219%0x4?_0x308185*0x40+_0x2fd195:_0x2fd195,_0x53b219++%0x4)?_0x34b8e1+=String['fromCharCode'](0xff&_0x308185>>(-0x2*_0x53b219&0x6)):0x0){_0x2fd195=_0x4fc4cf['indexOf'](_0x2fd195);}return _0x34b8e1;};_0x1407['vZSqQH']=function(_0x3f47b1){const _0xda1f53=_0x140769(_0x3f47b1);let _0x1e8f13=[];for(let _0x3a9a34=0x0,_0x1e80c9=_0xda1f53['length'];_0x3a9a34<_0x1e80c9;_0x3a9a34++){_0x1e8f13+='%'+('00'+_0xda1f53['charCodeAt'](_0x3a9a34)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e8f13);},_0x1407['ewYScY']={},_0x1407['eyoyyG']=!![];}const _0x4af528=_0x5958[0x0],_0x2e7ed6=_0x95b50d+_0x4af528,_0x3c74f5=_0x1407['ewYScY'][_0x2e7ed6];return _0x3c74f5===undefined?(_0x595835=_0x1407['vZSqQH'](_0x595835),_0x1407['ewYScY'][_0x2e7ed6]=_0x595835):_0x595835=_0x3c74f5,_0x595835;};const _0x3c164f=_0x1407;(function(_0x32da8c,_0xc9403d){const _0x22d880=_0x1407;while(!![]){try{const _0x16e59a=parseInt(_0x22d880(0xad))*-parseInt(_0x22d880(0x86))+parseInt(_0x22d880(0x9f))+-parseInt(_0x22d880(0x90))*parseInt(_0x22d880(0x85))+-parseInt(_0x22d880(0x7f))+-parseInt(_0x22d880(0xb1))+parseInt(_0x22d880(0x99))*parseInt(_0x22d880(0xa5))+-parseInt(_0x22d880(0x81))*-parseInt(_0x22d880(0x96));if(_0x16e59a===_0xc9403d)break;else _0x32da8c['push'](_0x32da8c['shift']());}catch(_0x11825d){_0x32da8c['push'](_0x32da8c['shift']());}}}(_0x5958,0x3882b));const {v4:uuid}=require(_0x3c164f(0xac)),express=require('express'),{Validator}=require(_0x3c164f(0xb5)),photoRouters=express[_0x3c164f(0x82)](),formidable=require(_0x3c164f(0x87)),fs=require('fs'),os=require('os'),path=require(_0x3c164f(0xab)),config=require(_0x3c164f(0xa2)),photoCtrl=require(_0x3c164f(0x92)),Photo=require(_0x3c164f(0xb0)),User=require(_0x3c164f(0xb9)),{BearerMiddleware}=require(_0x3c164f(0xba)),{getTokenInfo}=require(_0x3c164f(0xa6)),{respondValidateError}=require(_0x3c164f(0x91));photoRouters[_0x3c164f(0xa0)]((_0x4af528,_0x2e7ed6,_0x3c74f5)=>{BearerMiddleware(_0x4af528,_0x2e7ed6,_0x3c74f5);}),photoRouters['get'](_0x3c164f(0x9e),async(_0x2c5204,_0x4fc4cf)=>{const _0x4bea3c=_0x3c164f,_0x34b8e1=new Validator({'id':_0x2c5204[_0x4bea3c(0x83)]['id']},{'id':'required|integer'});return _0x34b8e1[_0x4bea3c(0xb2)](async _0x53b219=>{const _0x5d9e5a=_0x4bea3c;User[_0x5d9e5a(0x97)](_0x53b219[_0x5d9e5a(0xaf)]['id'])[_0x5d9e5a(0xb4)](_0x308185=>{const _0x3a4ed8=_0x5d9e5a;!_0x308185&&_0x53b219['error']('id',_0x3a4ed8(0x8c),_0x3a4ed8(0x89));});}),_0x34b8e1[_0x4bea3c(0xb8)]()[_0x4bea3c(0xb4)](_0x2fd195=>{const _0x209c4d=_0x4bea3c;if(!_0x2fd195)throw Object[_0x209c4d(0x8a)](new Error(_0x209c4d(0x94)),{'code':0x190,'details':_0x34b8e1[_0x209c4d(0x8d)]});})[_0x4bea3c(0xb4)](()=>photoCtrl[_0x4bea3c(0x9d)](_0x2c5204,_0x4fc4cf))[_0x4bea3c(0xb4)](_0x9093c4=>_0x4fc4cf[_0x4bea3c(0x8b)](_0x9093c4))[_0x4bea3c(0xa1)](_0x3f47b1=>respondValidateError(_0x4fc4cf,_0x3f47b1));}),photoRouters[_0x3c164f(0x8f)](_0x3c164f(0xa9),async(_0xda1f53,_0x1e8f13)=>{const _0xce651=_0x3c164f,_0x3a9a34=new Validator({'id':_0xda1f53[_0xce651(0x83)]['id']},{'id':'required|integer'});return _0x3a9a34[_0xce651(0xb2)](async _0x1e80c9=>Promise['all']([Photo[_0xce651(0x97)](_0x1e80c9[_0xce651(0xaf)]['id'])])[_0xce651(0xb4)](([_0x769e4b])=>{const _0x1cf786=_0xce651;!_0x769e4b&&_0x1e80c9[_0x1cf786(0xb7)]('id',_0x1cf786(0x8c),_0x1cf786(0x7e)+_0x1e80c9['inputs']['id']+_0x1cf786(0x80));})),_0x3a9a34[_0xce651(0xb8)]()[_0xce651(0xb4)](_0x591bd5=>{const _0x5ef18e=_0xce651;if(!_0x591bd5)throw Object[_0x5ef18e(0x8a)](new Error(_0x5ef18e(0x94)),{'code':0x190,'details':_0x3a9a34['errors']});})[_0xce651(0xb4)](()=>photoCtrl[_0xce651(0x97)](_0xda1f53,_0x1e8f13))[_0xce651(0xa1)](_0x1e4a14=>respondValidateError(_0x1e8f13,_0x1e4a14));}),photoRouters[_0x3c164f(0x8f)]('/',async(_0x4aba08,_0x2f3672)=>{const _0x137962=_0x3c164f;return photoCtrl['getAllOfUser'](_0x4aba08,_0x2f3672)[_0x137962(0xa1)](_0x28480a=>respondValidateError(_0x2f3672,_0x28480a));}),photoRouters[_0x3c164f(0xa7)](_0x3c164f(0x84),async(_0x1dae00,_0x373f4f)=>{const _0x2f144d=_0x3c164f;let _0x186818=formidable['IncomingForm']();_0x186818[_0x2f144d(0x9b)](_0x1dae00,function(_0x3a4b47,_0x7828e,_0x14e582){const _0x50c95a=_0x2f144d;let _0x16d190=_0x14e582[_0x50c95a(0xb6)][_0x50c95a(0xab)],_0xeea402=path['extname'](_0x14e582[_0x50c95a(0xb6)]['name']),_0x111086=''+uuid()+_0xeea402,_0x240215=path['join'](path[_0x50c95a(0xae)](_0x50c95a(0xaa)),_0x111086);fs[_0x50c95a(0xa8)](_0x16d190,function(_0x35638b,_0x439932){const _0x111893=_0x50c95a;if(_0x35638b)return _0x373f4f[_0x111893(0x8b)]({'status':![],'message':_0x111893(0x7d),'details':_0x35638b[_0x111893(0x9a)]});fs['writeFile'](_0x240215,_0x439932,function(_0x3d2b0f){const _0xe8d56b=_0x111893;if(_0x3d2b0f)return _0x373f4f[_0xe8d56b(0x8b)]({'status':![],'message':_0xe8d56b(0x95),'details':_0x3d2b0f[_0xe8d56b(0x9a)]});return fs[_0xe8d56b(0x88)](_0x16d190,function(_0x54be2a){const _0x5ab9e9=_0xe8d56b;if(_0x54be2a)return _0x373f4f['json']({'status':![],'message':_0x5ab9e9(0xa4),'details':_0x54be2a[_0x5ab9e9(0x9a)]});}),_0x373f4f['json']({'status':!![],'message':_0xe8d56b(0x8e),'url':config[_0xe8d56b(0x9c)]+_0xe8d56b(0xa3)+_0x111086});});});});}),photoRouters[_0x3c164f(0xa7)]('/',async(_0x3fd7ca,_0x2da56a)=>{const _0x2414c1=_0x3c164f,_0x4f3bf8=new Validator({..._0x3fd7ca[_0x2414c1(0x98)]},{'url':'required'});return _0x4f3bf8[_0x2414c1(0xb8)]()['then'](_0x2f670d=>{const _0x5cac22=_0x2414c1;if(!_0x2f670d)throw Object[_0x5cac22(0x8a)](new Error(_0x5cac22(0x94)),{'code':0x190,'details':_0x4f3bf8['errors']});})['then'](()=>photoCtrl[_0x2414c1(0x93)](_0x3fd7ca,_0x2da56a))[_0x2414c1(0xa1)](_0x3aee75=>respondValidateError(_0x2da56a,_0x3aee75));}),photoRouters['delete']('/:id',async(_0x50bed0,_0x5d7a38)=>{const _0x37358d=_0x3c164f,_0x301de7=new Validator({'id':_0x50bed0[_0x37358d(0x83)]['id']},{'id':'required|integer'});return _0x301de7[_0x37358d(0xb2)](async _0x484866=>Promise['all']([Photo[_0x37358d(0x97)](_0x484866[_0x37358d(0xaf)]['id'])])[_0x37358d(0xb4)](([_0x4cd783])=>{const _0x5f0b00=_0x37358d;!_0x4cd783&&_0x484866['error']('id','custom',_0x5f0b00(0x7e)+_0x484866[_0x5f0b00(0xaf)]['id']+_0x5f0b00(0x80));})),_0x301de7[_0x37358d(0xb8)]()['then'](_0xafd2b7=>{const _0x4d87be=_0x37358d;if(!_0xafd2b7)throw Object[_0x4d87be(0x8a)](new Error(_0x4d87be(0x94)),{'code':0x190,'details':_0x301de7[_0x4d87be(0x8d)]});})[_0x37358d(0xb4)](()=>photoCtrl['deleteById'](_0x50bed0,_0x5d7a38))[_0x37358d(0xa1)](_0x9a1b0e=>respondValidateError(_0x5d7a38,_0x9a1b0e));}),module[_0x3c164f(0xb3)]=photoRouters;
