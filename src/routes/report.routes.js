const _0x50b9=['DgfYz2v0x2LK','DxnLCL9Pza','mtiZn01mveDlwa','ywXS','y2HLy2S','zw1HAwW','sw52ywXPzcbYzxf1zxn0iq','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq','lI4VBw9KzwXZl2LUzgv4','ywrKug9ZDfj1Bgu','yxnZAwDU','zxjYB3i','lZPPza','lI4VAgvSCgvYCY9JB21TB24UAgvSCgvYCW','nJKWnZmXtxvZrgHS','zxHWCMvZCW','C2vUze1HAwW','nZeYqKzvu2XY','mtu2mdK1CNLOzMDm','z2v0qNLjza','zxjYB3jZ','zgvSzxrL','ANnVBG','DgHLBG','q09ntuvova','odCYmtj4A3nou00','DxnLCL9Uyw1L','uMvWB3j0ihDPDgGGDgHLigDPDMvUigLKigrVzxmGBM90igv4Axn0iq','Cgf0y2G','CMvXDwLYzwr8Aw50zwDLCG','CMvWB3j0','zxHWB3j0CW','uM91DgvY','BM9Kzs1PBNb1Dc12ywXPzgf0B3i','mNLqA0rQuG','Cg9ZDa','Aw5WDxrZ','oda4mJy4qMHRCxfW','CgfYyw1Z','ndyYmdGXrKruBxjx','su52ywXPzcbYzxf1zxn0iq','iIbKB2vZig5VDcbLEgLZDce','lI4Vy29UDhjVBgXLCNmVAw5KzxG','mtnAsenLuuy','uMvWB3j0ihDPDgGGAwqGiG','y3vZDg9T','DxnL','CMvXDwLYzwq','lI4VAgvSCgvYCY9HDxrOlMHLBhbLCNm','yM9KEq','DhLWzq','lI4VAgvSCgvYCY9PBMrLEa','nJG1mdHYCeX3AhK','y2f0y2G','sw52ywXPzcbYzxf1zxn0','zgvSzxrLqNLjzfjLCq','l2vTywLSlZPPza','z2v0','y29TBw9U','CgfNAw5HDgLVBLjLCq','CxvLCNK'];const _0x60f4=function(_0x21fe59,_0x2fa159){_0x21fe59=_0x21fe59-0xfc;let _0x50b960=_0x50b9[_0x21fe59];if(_0x60f4['agSdHH']===undefined){var _0x60f4a2=function(_0x4684f1){const _0x172398='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xc9af40='';for(let _0x4c72a5=0x0,_0x47b43c,_0x4bd3be,_0x28c5cd=0x0;_0x4bd3be=_0x4684f1['charAt'](_0x28c5cd++);~_0x4bd3be&&(_0x47b43c=_0x4c72a5%0x4?_0x47b43c*0x40+_0x4bd3be:_0x4bd3be,_0x4c72a5++%0x4)?_0xc9af40+=String['fromCharCode'](0xff&_0x47b43c>>(-0x2*_0x4c72a5&0x6)):0x0){_0x4bd3be=_0x172398['indexOf'](_0x4bd3be);}return _0xc9af40;};_0x60f4['KeBKTX']=function(_0x195a50){const _0x4dbfd6=_0x60f4a2(_0x195a50);let _0x1b0ab3=[];for(let _0x1787af=0x0,_0x4c1711=_0x4dbfd6['length'];_0x1787af<_0x4c1711;_0x1787af++){_0x1b0ab3+='%'+('00'+_0x4dbfd6['charCodeAt'](_0x1787af)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1b0ab3);},_0x60f4['cMwOMS']={},_0x60f4['agSdHH']=!![];}const _0x3a42e9=_0x50b9[0x0],_0x5b9185=_0x21fe59+_0x3a42e9,_0x367857=_0x60f4['cMwOMS'][_0x5b9185];return _0x367857===undefined?(_0x50b960=_0x60f4['KeBKTX'](_0x50b960),_0x60f4['cMwOMS'][_0x5b9185]=_0x50b960):_0x50b960=_0x367857,_0x50b960;};const _0x1143bb=_0x60f4;(function(_0x2f524f,_0x1f1637){const _0x3283e4=_0x60f4;while(!![]){try{const _0x4008bf=parseInt(_0x3283e4(0x107))+-parseInt(_0x3283e4(0x129))*parseInt(_0x3283e4(0xfe))+parseInt(_0x3283e4(0x135))+parseInt(_0x3283e4(0x121))*-parseInt(_0x3283e4(0x112))+parseInt(_0x3283e4(0x11e))+parseInt(_0x3283e4(0x132))*parseInt(_0x3283e4(0x137))+parseInt(_0x3283e4(0x122));if(_0x4008bf===_0x1f1637)break;else _0x2f524f['push'](_0x2f524f['shift']());}catch(_0x46a826){_0x2f524f['push'](_0x2f524f['shift']());}}}(_0x50b9,0x9a9b0));const express=require(_0x1143bb(0x11f)),{Validator}=require(_0x1143bb(0x131)),reportRouters=express[_0x1143bb(0x130)](),ctrls=require(_0x1143bb(0xfd)),models=require(_0x1143bb(0x118)),helpers=require(_0x1143bb(0x106)),{BearerMiddleware}=require(_0x1143bb(0x117)),{getTokenInfo}=require(_0x1143bb(0x103)),{respondValidateError}=require(_0x1143bb(0x11d));reportRouters[_0x1143bb(0x101)]((_0x3a42e9,_0x5b9185,_0x367857)=>{BearerMiddleware(_0x3a42e9,_0x5b9185,_0x367857);}),reportRouters['get'](_0x1143bb(0x11c),async(_0x4684f1,_0x172398)=>{const _0x558b86=_0x1143bb,_0xc9af40=new Validator({'id':_0x4684f1[_0x558b86(0x136)]['id']},{'id':'required'});return _0xc9af40[_0x558b86(0x114)]()[_0x558b86(0x127)](_0x4c72a5=>{const _0x348f7b=_0x558b86;if(!_0x4c72a5)throw Object[_0x348f7b(0x11a)](new Error('Invalid\x20request!'),{'code':0x190,'details':_0xc9af40['errors']});;return ctrls[_0x348f7b(0x12e)]['getById'](_0x4684f1[_0x348f7b(0x136)]['id']);})[_0x558b86(0x127)](_0x47b43c=>_0x172398[_0x558b86(0x126)](_0x47b43c))[_0x558b86(0x108)](_0x4bd3be=>respondValidateError(_0x172398,_0x4bd3be));}),reportRouters[_0x1143bb(0x10c)]('/',async(_0x28c5cd,_0x195a50)=>{const _0xfcf461=_0x1143bb,_0x4dbfd6=new Validator(_0x28c5cd[_0xfcf461(0x10f)],{'limit':'required|integer','page':'required|integer'});return _0x4dbfd6[_0xfcf461(0x114)]()[_0xfcf461(0x127)](_0x1b0ab3=>{const _0x1e8b1d=_0xfcf461;if(!_0x1b0ab3)throw Object[_0x1e8b1d(0x11a)](new Error(_0x1e8b1d(0x109)),{'code':0x190,'details':_0x4dbfd6[_0x1e8b1d(0x124)]});return ctrls[_0x1e8b1d(0x12e)][_0x1e8b1d(0x10e)](_0x28c5cd[_0x1e8b1d(0x10f)]);})[_0xfcf461(0x127)](_0x1787af=>_0x195a50[_0xfcf461(0x126)](_0x1787af))['catch'](_0x4c1711=>respondValidateError(_0x195a50,_0x4c1711));}),reportRouters[_0x1143bb(0x133)](_0x1143bb(0x10b),async(_0x4e242c,_0x3ad336)=>{const _0x575dee=_0x1143bb,{uid:_0x18f8ea,email:_0x32ad6a,role:_0xf58eef}=getTokenInfo(_0x4e242c);if(_0xf58eef!=='ADMIN')return _0x3ad336[_0x575dee(0x126)]({'status':![],'message':'Permission\x20error!'});const _0xcbbc08=new Validator({'id':_0x4e242c['params']['id'],..._0x4e242c[_0x575dee(0x104)]},{'id':'required','subject':_0x575dee(0x102),'body':_0x575dee(0x102)});_0xcbbc08['addPostRule'](async _0xbf7266=>Promise[_0x575dee(0x113)]([models[_0x575dee(0x12e)][_0x575dee(0x123)](_0xbf7266[_0x575dee(0x134)]['id'])])[_0x575dee(0x127)](([_0x2eb328])=>{const _0x38d55d=_0x575dee;!_0x2eb328&&_0xbf7266['error']('id','custom',_0x38d55d(0x12b));}));let _0x28b511;return _0xcbbc08[_0x575dee(0x114)]()[_0x575dee(0x127)](_0x1b45f1=>{const _0x22295b=_0x575dee;if(!_0x1b45f1)throw Object[_0x22295b(0x11a)](new Error(_0x22295b(0x116)),{'code':0x190,'details':_0xcbbc08[_0x22295b(0x124)]});return models[_0x22295b(0x12e)][_0x22295b(0x123)](_0x4e242c[_0x22295b(0x136)]['id']);})['then'](async _0x39d1ae=>{const _0x22766c=_0x575dee;_0x28b511=await models['user']['getById'](_0x39d1ae[_0x22766c(0x111)]);const {subject:_0x336e79,body:_0x29e9ec}=_0x4e242c[_0x22766c(0x104)];return helpers[_0x22766c(0x10d)][_0x22766c(0x120)]({'from':_0x32ad6a,'to':_0x28b511[_0x22766c(0x115)],'subject':_0x336e79,'body':_0x29e9ec});})[_0x575dee(0x127)](_0x3750eb=>{const _0x31ade3=_0x575dee;return _0x3ad336[_0x31ade3(0x126)]({'status':!![],'message':'Email\x20has\x20been\x20sent\x20to\x20'+_0x28b511[_0x31ade3(0x12a)],'data':_0x3750eb});})[_0x575dee(0x108)](_0x2bfcf6=>respondValidateError(_0x3ad336,_0x2bfcf6));}),reportRouters[_0x1143bb(0x133)]('/',async(_0xbb6704,_0x2f1b61)=>{const _0x721717=_0x1143bb,{uid:_0x42b062}=getTokenInfo(_0xbb6704),_0xf5d24f=new Validator(_0xbb6704['body'],{'reason':_0x721717(0x102),'type':'required','target_id':_0x721717(0x12d)}),_0x37de04=_0xbb6704[_0x721717(0x104)][_0x721717(0x105)]===_0x721717(0x128)?models['comment']:models[_0x721717(0x133)];return _0xf5d24f[_0x721717(0x119)](async _0xd01eac=>{const _0x3f9afa=_0x721717;await Promise[_0x3f9afa(0x113)]([_0x37de04['getById'](_0xd01eac[_0x3f9afa(0x134)]['target_id'])])[_0x3f9afa(0x127)](([_0x59cf4e])=>{const _0x3a7131=_0x3f9afa;!_0x59cf4e&&_0xd01eac[_0x3a7131(0x11b)](_0x3a7131(0x110),_0x3a7131(0x100),'Target\x20does\x20not\x20exist!');});}),_0xf5d24f[_0x721717(0x114)]()[_0x721717(0x127)](_0x5995db=>{const _0xeb8b19=_0x721717;if(!_0x5995db)throw Object[_0xeb8b19(0x11a)](new Error(_0xeb8b19(0x138)),{'code':0x190,'details':_0xf5d24f[_0xeb8b19(0x124)]});return ctrls['report']['createReq'](_0xbb6704,_0x2f1b61);})['then'](_0x3c6fae=>_0x2f1b61[_0x721717(0x126)](_0x3c6fae))[_0x721717(0x108)](_0x415597=>respondValidateError(_0x2f1b61,_0x415597));}),reportRouters[_0x1143bb(0x12c)](_0x1143bb(0x11c),async(_0x4cfb8d,_0x180461)=>{const _0x3c9a99=_0x1143bb,_0x37d19a=new Validator({'id':_0x4cfb8d['params']['id'],..._0x4cfb8d[_0x3c9a99(0x104)]},{'id':_0x3c9a99(0x102),'reason':_0x3c9a99(0x102)});return _0x37d19a[_0x3c9a99(0x114)]()[_0x3c9a99(0x127)](_0x1c9b76=>{const _0x3f100d=_0x3c9a99;if(!_0x1c9b76)throw Object['assign'](new Error(_0x3f100d(0x116)),{'code':0x190,'details':_0x37d19a[_0x3f100d(0x124)]});return ctrls[_0x3f100d(0x12e)]['updateById'](_0x4cfb8d['params']['id'],_0x4cfb8d[_0x3f100d(0x104)]);})[_0x3c9a99(0x127)](_0x489c23=>_0x180461[_0x3c9a99(0x126)](_0x489c23))['catch'](_0x435ad8=>respondValidateError(_0x180461,_0x435ad8));}),reportRouters[_0x1143bb(0x125)]('/:id',async(_0x4e871f,_0x12d485)=>{const _0x354ed1=_0x1143bb,_0x57315f=new Validator({'id':_0x4e871f['params']['id']},{'id':_0x354ed1(0x102)});return _0x57315f[_0x354ed1(0x119)](async _0xc94323=>{const _0x28ed99=_0x354ed1;Promise['all']([models[_0x28ed99(0x12e)]['getById'](_0xc94323[_0x28ed99(0x134)]['id'])])['then'](([_0x53e86f])=>{const _0x1cb93d=_0x28ed99;!_0x53e86f&&_0xc94323[_0x1cb93d(0x11b)]('id',_0x1cb93d(0x100),_0x1cb93d(0xff)+_0xc94323[_0x1cb93d(0x134)]['id']+_0x1cb93d(0xfc));});}),_0x57315f[_0x354ed1(0x114)]()[_0x354ed1(0x127)](_0x548494=>{const _0x2f3e75=_0x354ed1;if(!_0x548494)throw Object['assign'](new Error(_0x2f3e75(0x116)),{'code':0x190,'details':_0x57315f[_0x2f3e75(0x124)]});return ctrls[_0x2f3e75(0x12e)][_0x2f3e75(0x10a)]({'id':_0x4e871f[_0x2f3e75(0x136)]['id']});})[_0x354ed1(0x127)](_0x21f2f4=>_0x12d485[_0x354ed1(0x126)](_0x21f2f4))[_0x354ed1(0x108)](_0x8718a1=>respondError(_0x12d485,_0x8718a1));}),module[_0x1143bb(0x12f)]=reportRouters;