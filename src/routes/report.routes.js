const _0x4b48=['y2HLy2S','ywrKug9ZDfj1Bgu','B3v0Chv0','ANnVBG','ugvYBwLZC2LVBIbLCNjVCIe','Cg9ZDa','y2HLy2Tbzg1PBLbLCM1PC3nPB24','DxnLCL9Uyw1L','zgvSzxrL','DxbKyxrLqNLjza','DgfYz2v0x2LK','lZPPza','ugvYBwLZC2LVBIbKzw5PzwqH','lI4VAgvSCgvYCY9PBMrLEa','mte2odC2ow9jAgfvBG','y3vZDg9T','zw1HAwW','CgfNAw5HDgLVBLjLCq','DxnLCL9Pza','y29TBwvUDa','DhLWzq','ywXS','C2vUze1HAwW','lI4Vy29UC3rHBNrZl2nVBw1VBI5JB25ZDgfUDa','C3bSAxq','CMvXDwLYzwq','CMvWB3j0','Cgf0y2G','CgfYyw1Z','zxjYB3i','zxHWB3j0CW','mtu4qKHHwgru','y2HLy2TbBgXVD2vK','qurnsu4','l2vTywLSlZPPza','zxHWCMvZCW','m010Bxn1ua','mJK5ovPmrLzPzG','uMvWB3j0ihDPDgGGDgHLigDPDMvUigLKigrVzxmGBM90igv4Axn0iq','yM9VBgvHBG','q09ntuvova','su52ywXPzcbYzxf1zxn0iq','mxnPEuLguq','y3jLyxrLuMvX','sw52ywXPzcbYzxf1zxn0','DgHLBG','lI4Vy29UDhjVBgXLCNmVAw5KzxG','z2v0qNLjza','yM9KEq','mZC0nJLgs213suu','y2f0y2G','lI4VAgvSCgvYCY9JB21TB24UAgvSCgvYCW','lI4VBwLKzgXLD2fYzxmVyMfZAwmUBwLKzgXLD2fYzq','mZCYodq5DhHhwgHf','mtm1nLLrBg1PtG','CMvXDwLYzwr8Aw50zwDLCG','mZCYndKYv3DeDefv','BgvUz3rO','CxvLCNK','otK1nZi4Aw1eqKz5','lI4VAgvSCgvYCY9HDxrOlMHLBhbLCNm','sw52ywXPzcbYzxf1zxn0iq','mZC0rfL1vMfT','Aw5WDxrZ','u1vqrvi','yxnZAwDU','uM91DgvY','z2v0qNLvC2vYswq','zxjYB3jZ','C3rHDhvZ'];const _0x5996=function(_0x2a678e,_0x3ea79b){_0x2a678e=_0x2a678e-0x1e4;let _0x4b4870=_0x4b48[_0x2a678e];if(_0x5996['oAlSXy']===undefined){var _0x5996ff=function(_0x19f3fb){const _0x52a74a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4b6d84='';for(let _0x4caffc=0x0,_0x328569,_0x55af69,_0x178e66=0x0;_0x55af69=_0x19f3fb['charAt'](_0x178e66++);~_0x55af69&&(_0x328569=_0x4caffc%0x4?_0x328569*0x40+_0x55af69:_0x55af69,_0x4caffc++%0x4)?_0x4b6d84+=String['fromCharCode'](0xff&_0x328569>>(-0x2*_0x4caffc&0x6)):0x0){_0x55af69=_0x52a74a['indexOf'](_0x55af69);}return _0x4b6d84;};_0x5996['jUjQzC']=function(_0x2c0745){const _0x2f5052=_0x5996ff(_0x2c0745);let _0xad5071=[];for(let _0x5d21a3=0x0,_0x29a00a=_0x2f5052['length'];_0x5d21a3<_0x29a00a;_0x5d21a3++){_0xad5071+='%'+('00'+_0x2f5052['charCodeAt'](_0x5d21a3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xad5071);},_0x5996['TWSTkv']={},_0x5996['oAlSXy']=!![];}const _0xdc8bbd=_0x4b48[0x0],_0x46a34c=_0x2a678e+_0xdc8bbd,_0x34f1fc=_0x5996['TWSTkv'][_0x46a34c];return _0x34f1fc===undefined?(_0x4b4870=_0x5996['jUjQzC'](_0x4b4870),_0x5996['TWSTkv'][_0x46a34c]=_0x4b4870):_0x4b4870=_0x34f1fc,_0x4b4870;};const _0xcb3731=_0x5996;(function(_0x31e137,_0x49a6be){const _0x4c87ac=_0x5996;while(!![]){try{const _0x4bdb02=-parseInt(_0x4c87ac(0x209))+parseInt(_0x4c87ac(0x20c))+-parseInt(_0x4c87ac(0x212))*-parseInt(_0x4c87ac(0x20a))+-parseInt(_0x4c87ac(0x228))+-parseInt(_0x4c87ac(0x1f9))*-parseInt(_0x4c87ac(0x1f3))+parseInt(_0x4c87ac(0x1fe))*parseInt(_0x4c87ac(0x20f))+-parseInt(_0x4c87ac(0x1f8))*parseInt(_0x4c87ac(0x205));if(_0x4bdb02===_0x49a6be)break;else _0x31e137['push'](_0x31e137['shift']());}catch(_0x285c4a){_0x31e137['push'](_0x31e137['shift']());}}}(_0x4b48,0xa9b8d));const express=require(_0xcb3731(0x1f7)),{Validator}=require('node-input-validator'),reportRouters=express[_0xcb3731(0x216)](),ctrls=require(_0xcb3731(0x202)),models=require('../models/index'),helpers=require(_0xcb3731(0x227)),{BearerMiddleware}=require(_0xcb3731(0x208)),{getTokenInfo}=require(_0xcb3731(0x210)),{respondValidateError}=require(_0xcb3731(0x207)),{ADMIN_ROLE}=require(_0xcb3731(0x1eb)),activity={'checkAdminPermission':async(_0xdc8bbd,_0x46a34c)=>{const _0x10e400=_0xcb3731,{role:_0x34f1fc,role2:_0x19f3fb,uid:_0x52a74a}=getTokenInfo(_0xdc8bbd);if(_0x34f1fc!==_0x10e400(0x1f5))return![];if(_0x19f3fb===ADMIN_ROLE[_0x10e400(0x214)])return!![];const _0x4b6d84=models['adminPermission'][_0x10e400(0x21c)](await models['adminPermission'][_0x10e400(0x217)](_0x52a74a));return activity[_0x10e400(0x1f4)](_0x4b6d84,_0x46a34c);},'checkAllowed':(_0x4caffc,_0x328569=null)=>{const _0x264182=_0xcb3731;if(typeof _0x328569===_0x264182(0x1fb))return _0x328569;else{if(_0x328569===null||_0x328569===''||_0x328569===undefined)return!![];}const _0x55af69=_0x328569[_0x264182(0x1ec)]('.');if(_0x55af69['length']===0x1)return _0x4caffc[_0x55af69[0x0]];else{if(_0x55af69['length']===0x2)return _0x4caffc[_0x55af69[0x0]][_0x55af69[0x1]];else{if(_0x55af69[_0x264182(0x20d)]===0x3)return _0x4caffc[_0x55af69[0x0]][_0x55af69[0x1]][_0x55af69[0x2]];else{if(_0x55af69['length']===0x4)return _0x4caffc[_0x55af69[0x0]][_0x55af69[0x1]][_0x55af69[0x2]][_0x55af69[0x3]];}}}return![];}};reportRouters['use']((_0x178e66,_0x2c0745,_0x2f5052)=>{BearerMiddleware(_0x178e66,_0x2c0745,_0x2f5052);}),reportRouters['get']('/:id',async(_0xad5071,_0x5d21a3)=>{const _0x32806e=_0xcb3731,_0x29a00a=new Validator({'id':_0xad5071[_0x32806e(0x1f0)]['id']},{'id':_0x32806e(0x1ed)});return _0x29a00a[_0x32806e(0x21a)]()[_0x32806e(0x201)](_0x2a1071=>{const _0x1724e9=_0x32806e;if(!_0x2a1071)throw Object['assign'](new Error('Invalid\x20request!'),{'code':0x190,'details':_0x29a00a[_0x1724e9(0x218)]});;return ctrls['report'][_0x1724e9(0x203)](_0xad5071[_0x1724e9(0x1f0)]['id']);})[_0x32806e(0x201)](_0x23778b=>_0x5d21a3['json'](_0x23778b))[_0x32806e(0x206)](_0x3a7c86=>respondValidateError(_0x5d21a3,_0x3a7c86));}),reportRouters['get']('/',async(_0x2fd8a7,_0x14d362)=>{const _0x178f11=_0xcb3731,_0x2d4fee=await activity[_0x178f11(0x220)](_0x2fd8a7,'report.show');if(!_0x2d4fee)return _0x14d362[_0x178f11(0x219)](0x193)[_0x178f11(0x21d)]({'status':![],'message':_0x178f11(0x226)});const _0x2e5c63=new Validator(_0x2fd8a7[_0x178f11(0x20e)],{'limit':'required|integer','page':_0x178f11(0x20b)});return _0x2e5c63[_0x178f11(0x21a)]()[_0x178f11(0x201)](_0x2f4a6b=>{const _0x55f856=_0x178f11;if(!_0x2f4a6b)throw Object[_0x55f856(0x215)](new Error(_0x55f856(0x200)),{'code':0x190,'details':_0x2e5c63['errors']});return ctrls[_0x55f856(0x1ee)][_0x55f856(0x1e5)](_0x2fd8a7[_0x55f856(0x20e)]);})['then'](_0x22c49d=>_0x14d362[_0x178f11(0x21d)](_0x22c49d))[_0x178f11(0x206)](_0x55716f=>respondValidateError(_0x14d362,_0x55716f));}),reportRouters[_0xcb3731(0x21f)](_0xcb3731(0x1f6),async(_0x3a9af2,_0x3fd3eb)=>{const _0x38d6f8=_0xcb3731,{uid:_0x5a3c44,email:_0x1ebc28,role:_0xa01e9d}=getTokenInfo(_0x3a9af2);if(_0xa01e9d!=='ADMIN')return _0x3fd3eb[_0x38d6f8(0x21d)]({'status':![],'message':_0x38d6f8(0x21e)});const _0x30b932=new Validator({'id':_0x3a9af2[_0x38d6f8(0x1f0)]['id'],..._0x3a9af2[_0x38d6f8(0x204)]},{'id':_0x38d6f8(0x1ed),'subject':_0x38d6f8(0x1ed),'body':_0x38d6f8(0x1ed)});_0x30b932[_0x38d6f8(0x21b)](async _0x3a6229=>Promise[_0x38d6f8(0x1e9)]([models[_0x38d6f8(0x1ee)][_0x38d6f8(0x203)](_0x3a6229[_0x38d6f8(0x213)]['id'])])['then'](([_0xb5b70b])=>{const _0x47119f=_0x38d6f8;!_0xb5b70b&&_0x3a6229[_0x47119f(0x1f1)]('id',_0x47119f(0x229),_0x47119f(0x1fa));}));let _0x75d66b;return _0x30b932[_0x38d6f8(0x21a)]()['then'](_0x583f44=>{const _0x4a5ba9=_0x38d6f8;if(!_0x583f44)throw Object[_0x4a5ba9(0x215)](new Error(_0x4a5ba9(0x211)),{'code':0x190,'details':_0x30b932[_0x4a5ba9(0x218)]});return models[_0x4a5ba9(0x1ee)][_0x4a5ba9(0x203)](_0x3a9af2[_0x4a5ba9(0x1f0)]['id']);})['then'](async _0x38cf78=>{const _0x5a34c3=_0x38d6f8;_0x75d66b=await models['user'][_0x5a34c3(0x203)](_0x38cf78[_0x5a34c3(0x1e6)]);const {subject:_0x7b764c,body:_0x560d67}=_0x3a9af2[_0x5a34c3(0x204)];return helpers['common'][_0x5a34c3(0x1ea)]({'from':_0x1ebc28,'to':_0x75d66b[_0x5a34c3(0x1e4)],'subject':_0x7b764c,'body':_0x560d67});})[_0x38d6f8(0x201)](_0x242fbf=>{const _0x550bb5=_0x38d6f8;return _0x3fd3eb[_0x550bb5(0x21d)]({'status':!![],'message':'Email\x20has\x20been\x20sent\x20to\x20'+_0x75d66b[_0x550bb5(0x221)],'data':_0x242fbf});})[_0x38d6f8(0x206)](_0x1d73b6=>respondValidateError(_0x3fd3eb,_0x1d73b6));}),reportRouters[_0xcb3731(0x21f)]('/',async(_0x290b13,_0x2117d2)=>{const _0x4516df=_0xcb3731,{uid:_0x335da0}=getTokenInfo(_0x290b13),_0x23cbd5=new Validator(_0x290b13[_0x4516df(0x204)],{'reason':_0x4516df(0x1ed),'type':_0x4516df(0x1ed),'target_id':'required|integer'}),_0x2fae97=_0x290b13[_0x4516df(0x204)][_0x4516df(0x1e8)]===_0x4516df(0x1fc)?models[_0x4516df(0x1e7)]:models[_0x4516df(0x21f)];return _0x23cbd5[_0x4516df(0x21b)](async _0x461d96=>{const _0x5bdc5c=_0x4516df;await Promise[_0x5bdc5c(0x1e9)]([_0x2fae97[_0x5bdc5c(0x203)](_0x461d96[_0x5bdc5c(0x213)][_0x5bdc5c(0x224)])])[_0x5bdc5c(0x201)](([_0x13142c])=>{const _0x3da700=_0x5bdc5c;!_0x13142c&&_0x461d96[_0x3da700(0x1f1)](_0x3da700(0x224),_0x3da700(0x229),'Target\x20does\x20not\x20exist!');});}),_0x23cbd5[_0x4516df(0x21a)]()['then'](_0x542fa3=>{const _0x27cf3e=_0x4516df;if(!_0x542fa3)throw Object[_0x27cf3e(0x215)](new Error(_0x27cf3e(0x1fd)),{'code':0x190,'details':_0x23cbd5[_0x27cf3e(0x218)]});return ctrls[_0x27cf3e(0x1ee)][_0x27cf3e(0x1ff)](_0x290b13,_0x2117d2);})[_0x4516df(0x201)](_0x57fe27=>_0x2117d2[_0x4516df(0x21d)](_0x57fe27))[_0x4516df(0x206)](_0x110353=>respondValidateError(_0x2117d2,_0x110353));}),reportRouters[_0xcb3731(0x1ef)]('/:id',async(_0x2efaf8,_0x3cb90d)=>{const _0x54fe73=_0xcb3731,_0x111379=new Validator({'id':_0x2efaf8[_0x54fe73(0x1f0)]['id'],..._0x2efaf8[_0x54fe73(0x204)]},{'id':_0x54fe73(0x1ed),'reason':_0x54fe73(0x1ed)});return _0x111379[_0x54fe73(0x21a)]()[_0x54fe73(0x201)](_0xba9d54=>{const _0x1d2096=_0x54fe73;if(!_0xba9d54)throw Object[_0x1d2096(0x215)](new Error(_0x1d2096(0x211)),{'code':0x190,'details':_0x111379[_0x1d2096(0x218)]});return ctrls[_0x1d2096(0x1ee)][_0x1d2096(0x223)](_0x2efaf8['params']['id'],_0x2efaf8[_0x1d2096(0x204)]);})[_0x54fe73(0x201)](_0x561307=>_0x3cb90d[_0x54fe73(0x21d)](_0x561307))[_0x54fe73(0x206)](_0x50af7f=>respondValidateError(_0x3cb90d,_0x50af7f));}),reportRouters[_0xcb3731(0x222)](_0xcb3731(0x225),async(_0x32d4cb,_0xda555e)=>{const _0x5834d7=_0xcb3731,_0x590102=new Validator({'id':_0x32d4cb['params']['id']},{'id':_0x5834d7(0x1ed)});return _0x590102['addPostRule'](async _0xc9e6d4=>{const _0x4d7ca0=_0x5834d7;Promise['all']([models[_0x4d7ca0(0x1ee)]['getById'](_0xc9e6d4[_0x4d7ca0(0x213)]['id'])])[_0x4d7ca0(0x201)](([_0x366b5c])=>{const _0x3eb99d=_0x4d7ca0;!_0x366b5c&&_0xc9e6d4[_0x3eb99d(0x1f1)]('id',_0x3eb99d(0x229),'Report\x20with\x20id\x20\x22'+_0xc9e6d4[_0x3eb99d(0x213)]['id']+'\x22\x20does\x20not\x20exist!');});}),_0x590102[_0x5834d7(0x21a)]()[_0x5834d7(0x201)](_0x58d96f=>{const _0x6f4707=_0x5834d7;if(!_0x58d96f)throw Object[_0x6f4707(0x215)](new Error(_0x6f4707(0x211)),{'code':0x190,'details':_0x590102[_0x6f4707(0x218)]});return ctrls[_0x6f4707(0x1ee)]['deleteByIdReq']({'id':_0x32d4cb['params']['id']});})['then'](_0x504cb6=>_0xda555e[_0x5834d7(0x21d)](_0x504cb6))['catch'](_0x44262c=>respondError(_0xda555e,_0x44262c));}),module[_0xcb3731(0x1f2)]=reportRouters;